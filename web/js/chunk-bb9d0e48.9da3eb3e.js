(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb9d0e48"],{"37d2":function(e,t,n){},"4c92":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-content"},[e._m(0),n("div",{staticClass:"content"},[n("div",{staticClass:"content-btn"},[n("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增公告")])],1),n("div",{},[n("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[n("template",{slot:"footer"},[n("div",{staticClass:"table-footer"},[n("button",{on:{click:function(t){e.dialogPreview=!0}}},[e._v("预览")]),n("button",{on:{click:function(t){return e.edit(e.table_row)}}},[e._v("修改")]),n("button",[e._v("打印")]),n("button",{on:{click:function(t){return e.release(e.table_row)}}},[e._v("发布")]),n("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2),n("Drawer",{attrs:{drawerTitle:e.announceTitle,drawerVrisible:e.announce_vrisible},on:{drawerClose:e.announceClose}},[n("div",{staticStyle:{padding:"30px"}},[n("FromCard",[n("template",{slot:"title"},[e._v("基本信息")]),[n("VueForm",{ref:"announceVueForm",attrs:{formObj:e.announceForm},on:{ruleSuccess:e.announceRuleSubmit}},[n("template",{slot:"excelFileUrls"},[[n("el-upload",{attrs:{action:e.$baseUrl+"upload/uploadAnnouncement","on-success":e.ImgeSuccess,"file-list":e.imglist,"on-exceed":e.handleExceed,limit:1,accept:".jpg,.png,.JPG,.PNG","before-upload":e.beforeAvatarUpload}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"small"}},[e._v("上传图片")]),n("span",{staticStyle:{"margin-left":"10px","font-size":"12px",color:"#444444"}},[e._v("建议比例：3:2")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n("span",[e._v("支持扩展名：png,jpg")])])],1)]],2),n("template",{slot:"fileDocUrl"},[[n("el-upload",{attrs:{action:e.$baseUrl+"upload/uploadAnnouncementDoc","on-success":e.fileSuccess,"on-remove":e.wordRemove,"on-exceed":e.handleExceed,"file-list":e.wordList,accept:".doc,.DOC,.docx,.DOCX",limit:1,"before-upload":e.beforeFileUpload}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"small"}},[e._v("上传文件")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n("span",[e._v("支持扩展名：doc,docx")])])],1)]],2)],2)]],2)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"btn-orange",on:{click:function(t){return e.announceSubmit()}}},[n("span",[n("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),n("button",{staticClass:"btn-gray",on:{click:e.announceClose}},[n("span",[e._v("取消")])])])]),n("el-dialog",{staticClass:"dialogPreview",attrs:{title:"预览",visible:e.dialogPreview,width:"100%%",height:"100%",top:"0",Dialog:""},on:{"update:visible":function(t){e.dialogPreview=t}}},[n("div",{staticClass:"preview-header"},[n("div",{staticClass:"esc-preview",on:{click:function(t){e.dialogPreview=!1}}},[n("i",{staticClass:"el-icon-s-marketing",staticStyle:{"font-size":"24px","margin-left":"33px","margin-right":"9px"}}),n("span",[e._v("退出预览")])])]),n("div",{staticClass:"preview-body"},[n("div",{staticClass:"body-content"},[n("div",{staticClass:"preview-img"},[n("div",{staticClass:"preview-content"},[n("div",{staticClass:"preview-title"},[n("span",[e._v("新政！宁波市“无房家庭”可优先购买一套商品房")])]),n("div",{staticClass:"preview-content-img"}),n("div",{staticClass:"preview-content-text"},[n("p",[e._v(" 今天，宁波市住房和城乡建设局、宁波市自然资源和规 划局联合发布《关于进一步完善商品住房销售行为切实保障居民自住需求的通知》（以下简称《通知》）。 该《通知》意在保障居民自住需求，抑制投机投资行为， 《通知》明确符合条件的“无房家庭”可在市六区优先认购1套商品 住房，该套房要求在取得不动产权属证书满5年后方可转让，该新政从发布之日起实施。 ")]),n("p",[e._v(" 今天，宁波市住房和城乡建设局、宁波市自然资源和规 划局联合发布《关于进一步完善商品住房销售行为切实保障居民自住需求的通知》（以下简称《通知》）。 该《通知》意在保障居民自住需求，抑制投机投资行为， 《通知》明确符合条件的“无房家庭”可在市六区优先认购1套商品 住房，该套房要求在取得不动产权属证书满5年后方可转让，该新政从发布之日起实施。 ")]),n("p",[e._v(" 今天，宁波市住房和城乡建设局、宁波市自然资源和规 划局联合发布《关于进一步完善商品住房销售行为切实保障居民自住需求的通知》（以下简称《通知》）。 该《通知》意在保障居民自住需求，抑制投机投资行为， 《通知》明确符合条件的“无房家庭”可在市六区优先认购1套商品 住房，该套房要求在取得不动产权属证书满5年后方可转让，该新政从发布之日起实施。 ")]),n("p",[e._v(" 今天，宁波市住房和城乡建设局、宁波市自然资源和规 划局联合发布《关于进一步完善商品住房销售行为切实保障居民自住需求的通知》（以下简称《通知》）。 该《通知》意在保障居民自住需求，抑制投机投资行为， 《通知》明确符合条件的“无房家庭”可在市六区优先认购1套商品 住房，该套房要求在取得不动产权属证书满5年后方可转让，该新政从发布之日起实施。 ")])]),n("div",{staticClass:"preview-content-footer"},[n("span",[e._v("宁波永成物业 发布于 2020-08-12")])])])])])])])],1)])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-titel"},[n("span",[e._v("公告管理")])])}],a=(n("99af"),n("7db0"),n("b0c0"),n("8a79"),n("c356")),i=n("cb96"),l=n.n(i),s={data:function(){return{announceTitle:"新增公告",announce_vrisible:!1,previewImg:l.a,dialogPreview:!1,table_row:[],wordList:[],imglist:[],config:{thead:[{label:"序号",type:"index",width:"80"},{label:"公告标题",prop:"title",width:"auto"},{label:"推送对象",prop:"pushObject",width:"auto"},{label:"阅读量",prop:"readingVolume",width:"auto"},{label:"状态",prop:"status",width:"auto"},{label:"创建人",prop:"createName",width:"auto"},{label:"更新时间",prop:"updateDate",width:"auto"}],table_data:[],url:"announcementManagementList",search_item:[{type:"Input",label:"公告标题",placeholder:"请输入内容",prop:"title"},{type:"select",label:"公告状态",value:"",options:[{label:"未发布",value:"1"},{label:"已发布",value:"2"}],placeholder:"请选择",prop:"status"}],data:{pageNum:1,size:10}},announceForm:{ruleForm:{title:null,pushObject:null,excelFileUrls:[],content:null,fileDocUrl:null,status:1,scheduledReleaseTime:null},form_item:[{type:"Input",label:"公告标题",placeholder:"请输入",width:"100%",prop:"title"},{type:"Select",label:"推送对象",placeholder:"请输入",width:"100%",prop:"pushObject",options:[{label:"业主",value:1},{label:"租户",value:2},{label:"租户",value:3}]},{type:"Slot",label:"公告图片",placeholder:"请输入",width:"100%",prop:"excelFileUrls",slotName:"excelFileUrls"},{type:"textarea",label:"公告内容",placeholder:"请输入公告内容",prop:"content",width:"100%",rows:5},{type:"Slot",label:"上传文件",placeholder:"请输入",width:"100%",prop:"fileDocUrl",slotName:"fileDocUrl"},{type:"Select",label:"状态",placeholder:"请输入",prop:"status",width:"100%",options:[{label:"未发布",value:1},{label:"已发布",value:2},{label:"定时发布",value:3}]},{type:"DateTime",label:"定时时间",placeholder:"请输入",width:"100%",disabled:!0,prop:"scheduledReleaseTime"}],rules:{title:[{required:!0,message:"请输入费用项目名称",trigger:"blur"}],pushObject:[{required:!0,message:"请输入费用项目名称",trigger:"change"}],excelFileUrls:[{required:!0,message:"请上传图片",trigger:"change"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],fileDocUrl:[{required:!0,message:"请选择文件",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}}},watch:{"announceForm.ruleForm.status":{handler:function(e){console.log(e),3===e?this.announceForm.form_item.find((function(e){"scheduledReleaseTime"===e.prop&&(e.disabled=!1)})):this.announceForm.form_item.find((function(e){"scheduledReleaseTime"===e.prop&&(e.disabled=!0)}))},immediate:!0}},methods:{tableCheck:function(e){this.table_row=e},announceClose:function(){this.announce_vrisible=!1,this.wordList=[],this.imglist=[],this.$refs.announceVueForm.reset()},announceRuleSubmit:function(){var e=this,t={title:this.announceForm.ruleForm.title,pushObject:this.announceForm.ruleForm.pushObject,excelFileUrls:this.announceForm.ruleForm.excelFileUrls,content:this.announceForm.ruleForm.content,fileDocUrl:this.announceForm.ruleForm.fileDocUrl,status:this.announceForm.ruleForm.status,scheduledReleaseTime:this.announceForm.ruleForm.scheduledReleaseTime};3!==this.announceForm.ruleForm.status||this.announceForm.ruleForm.scheduledReleaseTime?Object(a["f"])(t).then((function(t){console.log(t),t.status&&(e.$message({message:t.message,type:"success"}),e.announceClose(),e.$refs.table.loadData())})):this.$message.error("请选择定时时间")},announceSubmit:function(){this.$refs.announceVueForm.submitForm()},add:function(){this.announce_vrisible=!0},ImgeSuccess:function(e,t){this.announceForm.ruleForm.excelFileUrls[0]=t.response.url},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2,n="image/png"===e.type,r="image/jpeg"===e.type;return n||r||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),(n||r)&&t},fileSuccess:function(e,t){this.announceForm.ruleForm.fileDocUrl=t.response.url},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},wordRemove:function(){this.announceForm.ruleForm.fileDocUrl=null},beforeFileUpload:function(e){console.log(e);var t=e.size/1024/1024<2,n=e.name.endsWith(".doc")||e.name.endsWith(".docx");return console.log(n),n||this.$message.error("上传头像图片只能是 doc/docx 格式!"),t||this.$message.error("上传文件大小不能超过 2MB!"),n&&t},del:function(e){var t=this;if(e.length){for(var n=[],r=0;r<this.table_row.length;r++)n.push(this.table_row[r].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(n)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")},release:function(e){var t=this;if(e.length){for(var n=[],r=0;r<this.table_row.length;r++)n.push(this.table_row[r].id);this.$confirm("确认现在发布？","发布提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){var e={ids:n};Object(a["g"])(e).then((function(e){e.status&&(t.$message({type:"success",message:e.message}),t.$refs.table.loadData())}))})).catch((function(e){}))}else this.$message.error("请选中需要发布的数据")},edit:function(e){var t=this;if(e.length){var n={id:e[0].id};Object(a["e"])(n).then((function(e){if(e.status){console.log(e.data);var n=e.data;t.announceForm.ruleForm.title=n.title,t.announceForm.ruleForm.pushObject=n.pushObject,t.announceForm.ruleForm.excelFileUrls[0]=n.imgUrls[0].url,t.announceForm.ruleForm.content=n.content,t.announceForm.ruleForm.fileDocUrl=n.fileDocUrl,t.announceForm.ruleForm.status=n.status,t.announceForm.ruleForm.scheduledReleaseTime=n.scheduledReleaseTime;var r={name:n.fileDocUrl,url:n.fileDocUrl};t.$set(t.wordList,"0",r);var o={name:n.imgUrls[0].url,url:n.imgUrls[0].url};t.$set(t.imglist,"0",o),t.announce_vrisible=!0}}))}}}},c=s,u=(n("a44e"),n("2877")),d=Object(u["a"])(c,r,o,!1,null,"c42371a0",null);t["default"]=d.exports},"7db0":function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").find,a=n("44d2"),i=n("ae40"),l="find",s=!0,c=i(l);l in[]&&Array(1)[l]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(l)},8418:function(e,t,n){"use strict";var r=n("c04e"),o=n("9bf2"),a=n("5c6c");e.exports=function(e,t,n){var i=r(t);i in e?o.f(e,i,a(0,n)):e[i]=n}},"8a79":function(e,t,n){"use strict";var r=n("23e7"),o=n("06cf").f,a=n("50c4"),i=n("5a34"),l=n("1d80"),s=n("ab13"),c=n("c430"),u="".endsWith,d=Math.min,m=s("endsWith"),f=!c&&!m&&!!function(){var e=o(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!f&&!m},{endsWith:function(e){var t=String(l(this));i(e);var n=arguments.length>1?arguments[1]:void 0,r=a(t.length),o=void 0===n?r:d(a(n),r),s=String(e);return u?u.call(t,s,o):t.slice(o-s.length,o)===s}})},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),a=n("e8b5"),i=n("861d"),l=n("7b0b"),s=n("50c4"),c=n("8418"),u=n("65f0"),d=n("1dde"),m=n("b622"),f=n("2d00"),p=m("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=f>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=d("concat"),w=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},F=!b||!v;r({target:"Array",proto:!0,forced:F},{concat:function(e){var t,n,r,o,a,i=l(this),d=u(i,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?i:arguments[t],w(a)){if(o=s(a.length),m+o>h)throw TypeError(g);for(n=0;n<o;n++,m++)n in a&&c(d,m,a[n])}else{if(m>=h)throw TypeError(g);c(d,m++,a)}return d.length=m,d}})},a44e:function(e,t,n){"use strict";var r=n("37d2"),o=n.n(r);o.a},b0c0:function(e,t,n){var r=n("83ab"),o=n("9bf2").f,a=Function.prototype,i=a.toString,l=/^\s*function ([^ (]*)/,s="name";r&&!(s in a)&&o(a,s,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(e){return""}}})},c356:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"m",(function(){return b}));var r=n("b775");n("2c37");function o(e){return r["a"].request({method:"POST",url:"/announcementManagement/release",data:e})}function a(e){return r["a"].request({method:"POST",url:"/notificationManagement/insert",data:e})}function i(e){return r["a"].request({method:"GET",url:"/notificationManagement/findById",params:e})}function l(e){return r["a"].request({method:"POST",url:"/notificationManagement/update",data:e})}function s(e){return r["a"].request({method:"GET",url:"/activityManagement/findById",params:e})}function c(e){return r["a"].request({method:"POST",url:"/activityManagement/update",data:e})}function u(e){return r["a"].request({method:"POST",url:"/activityManagement/insert",data:e})}function d(e){return r["a"].request({method:"GET",url:"/activityManagement/findRegistrationById",params:e})}function m(e){return r["a"].request({method:"GET",url:"/announcementManagement/findById",params:e})}function f(e){return r["a"].request({method:"POST",url:"/sponsorManagement/insert",data:e})}function p(e){return r["a"].request({method:"POST",url:"/sponsorManagement/update",data:e})}function h(e){return r["a"].request({method:"GET",url:"/sponsorManagement/findById",params:e})}function g(e){return r["a"].request({method:"POST",url:"/announcementManagement/insert",data:e})}function b(e){return r["a"].request({method:"GET",url:"/sponsorManagement/list",params:e})}},cb96:function(e,t,n){e.exports=n.p+"img/dialogPreviewbg.44e090f9.png"}}]);
//# sourceMappingURL=chunk-bb9d0e48.9da3eb3e.js.map