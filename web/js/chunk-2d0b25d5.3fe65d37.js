(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b25d5"],{2496:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-content"},[e._m(0),o("div",{staticClass:"content"},[o("div",{staticClass:"content-btn"},[o("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.addBuild()}}},[e._v("新增单元")])],1),o("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[o("template",{slot:"footer"},[o("div",{staticClass:"table-footer"},[o("button",{on:{click:function(t){return e.revise(e.table_row)}}},[e._v("修改")]),o("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2)],1),o("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[o("div",{staticStyle:{padding:"30px"}},[o("FromCard",[o("template",{slot:"title"},[e._v("基本信息")]),[o("VueForm",{ref:"childFrom",attrs:{formObj:e.reviseForm},on:{ruleSubmit:e.ruleSubmit}})]],2)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[o("span",[o("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),o("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[o("span",[e._v("取消")])])])])],1)},l=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-titel"},[o("span",[e._v("单位信息")])])}],i=o("2b74"),s={data:function(){return{drawerTitle:"",bool:!1,drawer_vrisible:!1,drawerControl:!0,config:{thead:[{label:"序号",type:"index",width:"80"},{label:"楼栋",prop:"buildingName",width:"auto"},{label:"单元（号）",prop:"no",width:"auto"},{label:"总层数",prop:"totalFloor",width:"auto",type:"function",callback:function(e,t){return"".concat(e.totalFloor,"层")}},{label:"是否有电梯",prop:"isElevator",width:"auto",type:"function",callback:function(e,t){return"".concat(e.isElevator?"有电梯":"无电梯")}}],loading:!0,data:{pageNum:1,size:10},table_data:[],url:"UnitList",search_item:[{type:"Input",label:"楼栋名称",placeholder:"请输入内容",prop:"buildingName"},{type:"Int",label:"单元(号)",placeholder:"请输入",prop:"no"}]},table_row:[],reviseForm:{ruleForm:{isElevator:null,no:null,totalFloor:null,buildingId:null},rules:{name:[{required:!0,message:"请填写楼栋名称",trigger:"blur"}],no:[{required:!0,message:"请填写楼栋名称",trigger:"blur"}]},form_item:[{type:"Select",label:"楼栋",placeholder:"请输入",width:"100%",prop:"buildingId",options:[]},{type:"Int",label:"单元（号）",placeholder:"请输入",width:"100%",prop:"no"},{type:"Int",label:"总层数",placeholder:"请输入",width:"100%",prop:"totalFloor"},{type:"Select",label:"是否有电梯",placeholder:"请输入",width:"100%",prop:"isElevator",options:[{value:0,label:"无电梯"},{value:1,label:"有电梯"}]}]}}},mounted:function(){var e=this;Object(i["k"])().then((function(t){console.log(t),e.reviseForm.form_item[0].options=t}))},methods:{ruleSubmit:function(e){this.bool=e},onSubmit:function(){var e=this;if(this.$refs.childFrom.submitForm(),this.bool)if(this.drawerControl){var t={buildingId:this.reviseForm.ruleForm.buildingId,totalFloor:this.reviseForm.ruleForm.totalFloor,isElevator:this.reviseForm.ruleForm.isElevator,no:this.reviseForm.ruleForm.no};Object(i["l"])(t).then((function(t){console.log(t),t.status&&(e.$message({message:t.message,type:"success"}),e.getData(),e.drawerClose())})).catch((function(e){console.log(e)}))}else{var o={id:this.table_row[0].id,buildingId:this.reviseForm.ruleForm.buildingId,totalFloor:this.reviseForm.ruleForm.totalFloor,isElevator:this.reviseForm.ruleForm.isElevator,no:this.reviseForm.ruleForm.no};Object(i["m"])(o).then((function(t){console.log(t),t.status&&(e.$message({message:t.message,type:"success"}),e.getData(),e.drawerClose())})).catch((function(e){console.log(e)}))}},tableCheck:function(e){this.table_row=e},getData:function(){this.$refs.table.loadData()},drawerClose:function(){for(var e in this.reviseForm.ruleForm)this.reviseForm.ruleForm[e]="";this.drawer_vrisible=!1},addBuild:function(){console.log(this.reviseForm.ruleForm),this.drawerControl=!0,this.drawer_vrisible=!0,this.drawerTitle="添加单元"},revise:function(e){console.log(e),e.length?e.length>1?this.$message.error("只能单条数据修改"):(this.drawerControl=!1,this.drawerTitle="修改单元",this.drawer_vrisible=!0,console.log(e[0].isElevator),this.reviseForm.ruleForm.buildingId=e[0].buildingId,this.reviseForm.ruleForm.totalFloor=e[0].totalFloor,this.reviseForm.ruleForm.isElevator=e[0].isElevator,this.reviseForm.ruleForm.no=e[0].no):this.$message.error("请选中需要修改的数据")},del:function(e){var t=this;if(e.length){for(var o=[],r=0;r<this.table_row.length;r++)o.push(this.table_row[r].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(o)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")}}},a=s,n=o("2877"),c=Object(n["a"])(a,r,l,!1,null,"bb4454b4",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b25d5.3fe65d37.js.map