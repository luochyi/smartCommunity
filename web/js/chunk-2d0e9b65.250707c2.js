(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e9b65"],{"8f67":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"main-content"},[e._m(0),l("div",{staticClass:"content"},[l("div",{staticClass:"content-btn"},[l("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增车辆")])],1),l("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[l("template",{slot:"footer"},[l("div",{staticClass:"table-footer"},[l("button",{on:{click:function(t){return e.revises(e.table_row)}}},[e._v("修改")]),l("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2)],1),l("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[l("div",{staticStyle:{padding:"30px"}},[l("FromCard",[l("template",{slot:"title"},[e._v("基本信息")]),[l("VueForm",{ref:"childFrom",attrs:{formObj:e.addEidtForm},on:{ruleSubmit:e.ruleSubmit},scopedSlots:e._u([{key:"hours",fn:function(){return[l("el-select",{staticStyle:{width:"30%","margin-right":"16px"},attrs:{filterable:"",placeholder:"幢"},model:{value:e.buildValue,callback:function(t){e.buildValue=t},expression:"buildValue"}},e._l(e.buildOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),l("el-select",{staticStyle:{width:"30%","margin-right":"16px"},attrs:{filterable:"",placeholder:"单元"},model:{value:e.unitValue,callback:function(t){e.unitValue=t},expression:"unitValue"}},e._l(e.unitOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),l("el-select",{staticStyle:{width:"30%"},attrs:{filterable:"",placeholder:"房间号"},model:{value:e.hoursValue,callback:function(t){e.hoursValue=t},expression:"hoursValue"}},e._l(e.hoursOptions,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])})]],2)],1),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[l("span",[l("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),l("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[l("span",[e._v("取消")])])])])],1)},i=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"main-titel"},[l("span",[e._v("车辆档案")])])}],o=(l("d81d"),l("2b74")),r={data:function(){return{buildValue:null,buildOptions:[],unitValue:null,unitOptions:[],hoursValue:null,hoursOptions:[],loading:!1,userName:"",drawerTitle:"",drawer_vrisible:!1,table_row:[],addEidtForm:{ruleForm:{code:null,no:null,owner:null,tel:null,idType:null,idNumber:null,status:null},form_item:[{type:"Input",label:"车牌号",placeholder:"请输入车牌号",width:"50%",prop:"code"},{type:"Input",label:"车位号",placeholder:"请输入车位号",width:"50%",prop:"no"},{type:"Input",label:"所属人",placeholder:"请输入",width:"50%",prop:"owner"},{type:"Input",label:"手机号",placeholder:"请输入",width:"50%",prop:"tel"},{type:"Select",label:"证件类型",placeholder:"请输入",options:[{value:1,label:"身份证"},{value:2,label:"营业执照"}],width:"50%",prop:"idType"},{type:"Input",label:"证件号码\t",placeholder:"请输入",width:"50%",prop:"idNumber"},{type:"Select",label:"状态",placeholder:"请输入",options:[],width:"50%",prop:"status"},{type:"Slot",label:"房屋信息",placeholder:"请输入",width:"70%",slotName:"hours",prop:"hours"}],rules:{code:[{required:!0,message:"请输入车牌号",trigger:"blur"}],no:[{required:!0,message:"请输入车位号",trigger:"blur"}]}},config:{search_item:[{type:"Input",label:"所属手机号",placeholder:"请输入所属手机号",prop:"tel"},{type:"Input",label:"车牌号",placeholder:"请输入车牌号",prop:"code"},{type:"Input",label:"车位号",placeholder:"请输入车位号",prop:"parkingSpaceCode"}],thead:[{label:"序号",type:"index",width:"80"},{label:"车牌号",prop:"code",width:"auto"},{label:"姓名",prop:"owner",width:"auto"},{label:"手机号",prop:"tel",width:"auto"},{label:"状态",prop:"status",width:"auto"},{label:"剩余时间",prop:"effectiveTimeEnd",width:"auto"},{label:"车位号",prop:"parkingSpaceCode",width:"auto"},{label:"房屋信息",prop:"roomName",width:"auto"},{label:"证件类型",prop:"idType",width:"auto"},{label:"证件号码",prop:"idNumber",width:"auto"}],url:"vehicleList",data:{pageNum:1,size:10}},options:[],buildingUnitEstateId:null}},mounted:function(){var e=this;Object(o["k"])().then((function(t){e.buildOptions=t})),Object(o["v"])().then((function(t){console.log(t);var l=t.map((function(e){return{label:e.showName,value:e.showValue}}));console.log(l),e.addEidtForm.form_item[6].options=l}))},methods:{onSubmit:function(){var e=this,t={buildingUnitEstateId:57,code:this.addEidtForm.ruleForm.code,type:1,owner:this.userName,tel:this.addEidtForm.ruleForm.tel,idType:this.addEidtForm.ruleForm.idType,idNumber:this.addEidtForm.ruleForm.idNumber,status:this.addEidtForm.ruleForm.status,parkingSpaceId:1};Object(o["y"])(t).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.drawerClose(),e.$refs.table.loadData())}))},ruleSubmit:function(){},drawerClose:function(){this.drawer_vrisible=!1},revises:function(e){if(e.length)if(e.length>1)this.$message.error("只能单条数据修改");else{this.drawerTitle="修改车辆",this.drawer_vrisible=!0;var t={id:e[0].id};Object(o["x"])(t).then((function(e){}))}else this.$message.error("请选中需要修改的数据")},add:function(){this.drawerTitle="新增车辆",this.drawer_vrisible=!0},handleClose:function(){this.drawer_vrisible=!1},tableCheck:function(e){console.log(e),this.table_row=e},getData:function(){this.$refs.table.loadData()},del:function(e){var t=this;if(e.length){for(var l=[],a=0;a<this.table_row.length;a++)l.push(this.table_row[a].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(l)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")},unitData:function(e){var t=this,l={id:e};Object(o["r"])(l).then((function(e){t.unitOptions=e}))},hoursData:function(e){var t=this,l={id:e};Object(o["s"])(l).then((function(e){console.log(e),t.hoursOptions=e}))}},watch:{buildValue:{handler:function(e){this.unitData(e),this.unitValue=null},deep:!0},unitValue:{handler:function(e){this.hoursData(e),this.hoursValue=null},deep:!0}}},n=r,u=l("2877"),s=Object(u["a"])(n,a,i,!1,null,"1a33afe8",null);t["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d0e9b65.250707c2.js.map