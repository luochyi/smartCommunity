(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cf9b942"],{a9c0:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-content"},[e._m(0),o("div",{staticClass:"content"},[o("div",{staticClass:"content-btn"},[o("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增车辆")])],1),o("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[o("template",{slot:"footer"},[o("div",{staticClass:"table-footer"},[o("button",{on:{click:function(t){return e.revises(e.table_row)}}},[e._v("修改")]),o("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2)],1),o("addEidt",{ref:"addEidt",attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{addEidtSuccess:e.addEidtSuccess,handleClose:e.handleClose}})],1)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main-titel"},[o("span",[e._v("车位信息")])])}],i=(o("d81d"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[o("FromCard",{staticStyle:{margin:"30px"}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),o("VueForm",{ref:"childFroms",attrs:{formObj:e.fromjson}})],1),o("div",{staticStyle:{margin:"30px"}},[o("FromCard",[o("span",{attrs:{slot:"title"},slot:"title"},[e._v("业主关联")]),o("div",{},[o("VueForm",{ref:"childFrom",attrs:{formObj:e.addForm},on:{ruleSubmit:e.ruleSubmit},scopedSlots:e._u([{key:"name",fn:function(){return[o("el-select",{staticStyle:{width:"240px"},attrs:{"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",placeholder:"请选择"},on:{change:e.change,focus:e.sefocus},model:{value:e.addForm.ruleForm.name,callback:function(t){e.$set(e.addForm.ruleForm,"name",t)},expression:"addForm.ruleForm.name"}},e._l(e.options,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)]},proxy:!0}])})],1)])],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[o("span",[o("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),o("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[o("span",[e._v("取消")])])])],1)],1)}),a=[],l=(o("b0c0"),o("2b74")),s={props:{drawerVrisible:{type:Boolean,default:function(){return!1}},drawerTitle:{type:String,default:function(){return""}}},data:function(){return{loading:!1,options:[],drawer_vrisible:!1,editId:null,bool:!1,fromjson:{ruleForm:{code:null,status:null,type:null},form_item:[{type:"Input",label:"车位编号\t",placeholder:"请输入",width:"50%",prop:"code"},{type:"Select",label:"状态",placeholder:"请输入",options:[],width:"50%",prop:"status"},{type:"Select",label:"车位类型",placeholder:"请输入",options:[],width:"50%",prop:"type"}]},addForm:{ruleForm:{tel:null,name:null,idType:null,idNumber:null,residentId:null},form_item:[{type:"Slot",label:"业主姓名",placeholder:"请输入",width:"50%",slotName:"name",prop:"name"},{type:"Input",label:"联系方式",placeholder:"请输入",width:"50%",disabled:!0,prop:"tel"},{type:"Select",label:"证件类型",placeholder:"请输入",disabled:!0,options:[{value:1,label:"身份证"},{value:2,label:"营业执照"}],width:"50%",prop:"idType"},{type:"Input",label:"证件号码",placeholder:"请输入",disabled:!0,width:"50%",prop:"idNumber"}]}}},mounted:function(){var e=this;Object(l["t"])().then((function(t){var o=t.map((function(e){return{label:e.showName,value:e.showValue}}));console.log(o),e.fromjson.form_item[1].options=o})),Object(l["u"])().then((function(t){var o=t.map((function(e){return{label:e.showName,value:e.showValue}}));console.log(o),e.fromjson.form_item[2].options=o}))},methods:{remoteMethod:function(e){var t=this,o={pageNum:1,size:20,name:e};this.loading=!0,Object(l["z"])(o).then((function(e){t.options=e.tableList,t.loading=!1,console.log(e)}))},sefocus:function(){var e=this,t={pageNum:1,size:20};this.loading=!0,Object(l["z"])(t).then((function(t){e.options=t.tableList;var o={id:0,idNumber:"",idType:"",name:"（空）",tel:""};e.options.unshift(o),e.loading=!1,console.log(e.options)}))},change:function(e){var t=this;console.log(e),this.options.map((function(o){o.id===e&&(t.addForm.ruleForm.tel=o.tel,t.addForm.ruleForm.idType=o.idType,t.addForm.ruleForm.idNumber=o.idNumber,t.addForm.ruleForm.residentId=e)}))},drawerClose:function(){this.drawer_vrisible=!1,this.editId=null,this.$refs.childFroms.reset(),this.$refs.childFrom.reset(),this.$emit("handleClose","Close")},edit:function(e){var t=this,o={id:e};this.editId=e,Object(l["n"])(o).then((function(e){t.fromjson.ruleForm.code=e.code,t.fromjson.ruleForm.status=e.status,t.fromjson.ruleForm.type=e.type;var o={id:e.residentId};Object(l["C"])(o).then((function(o){t.addForm.ruleForm.idNumber=o.userResident.idNumber,t.addForm.ruleForm.name=o.userResident.name,t.addForm.ruleForm.tel=o.userResident.tel,t.addForm.ruleForm.idType=o.userResident.idType,t.addForm.ruleForm.residentId=e.residentId}))})),this.editBool=!0,this.drawer_vrisible=!0},ruleSubmit:function(e){this.bool=e},onSubmit:function(){var e=this,t={code:this.fromjson.ruleForm.code,status:this.fromjson.ruleForm.status,type:this.fromjson.ruleForm.type,residentId:this.addForm.ruleForm.residentId};this.editId?(t.id=this.editId,Object(l["q"])(t).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.$emit("addEidtSuccess"),e.drawerClose()),console.log(t)}))):Object(l["o"])(t).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.$emit("addEidtSuccess"),e.drawerClose()),console.log(t)}))}},watch:{drawerVrisible:{handler:function(e){this.drawer_vrisible=e}}}},d=s,u=o("2877"),c=Object(u["a"])(d,i,a,!1,null,"568f2c9f",null),m=c.exports,p={components:{addEidt:m},data:function(){var e=this;return{drawerTitle:"",drawer_vrisible:!1,table_row:[],parkType:[],parkStatus:[],config:{search_item:[{type:"Input",label:"车位编号",placeholder:"请输入",prop:"code"},{type:"select",label:"状态",placeholder:"请选择",options:[],prop:"status"},{type:"Input",label:"业主",placeholder:"请输入",prop:"residentName"}],thead:[{label:"序号",type:"index",width:"80"},{label:"车位编号",prop:"code",width:"auto"},{label:"状态",prop:"status",width:"auto",type:"function",callback:function(t,o){var r="";return e.parkStatus.map((function(e){t.status===e.showValue&&(r=e.showName)})),r}},{label:"车位类型",prop:"type",width:"auto",type:"function",callback:function(t,o){var r="";return e.parkType.map((function(e){t.type===e.showValue&&(r=e.showName)})),r}},{label:"业主",prop:"residentName",width:"auto"},{label:"使用人",prop:"userName",width:"auto"},{label:"联系方式",prop:"tel",width:"auto"}],url:"parkList",data:{pageNum:1,size:10}}}},mounted:function(){var e=this;Object(l["u"])().then((function(t){e.parkType=t})),Object(l["t"])().then((function(t){e.parkStatus=t;var o=t.map((function(e){return{label:e.showName,value:e.showValue}}));e.config.search_item[1].options=o}))},methods:{revises:function(e){console.log(e),e.length?e.length>1?this.$message.error("只能单条数据修改"):(this.drawerTitle="修改房屋",this.$refs.addEidt.edit(e[0].id)):this.$message.error("请选中需要修改的数据")},addEidtSuccess:function(){this.$refs.table.loadData()},add:function(){this.drawerTitle="新增车辆",this.drawer_vrisible=!0},handleClose:function(){this.drawer_vrisible=!1},tableCheck:function(e){this.table_row=e},del:function(e){var t=this;if(e.length){for(var o=[],r=0;r<this.table_row.length;r++)o.push(this.table_row[r].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(o)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")}}},h=p,f=Object(u["a"])(h,r,n,!1,null,"291e50c0",null);t["default"]=f.exports},b0c0:function(e,t,o){var r=o("83ab"),n=o("9bf2").f,i=Function.prototype,a=i.toString,l=/^\s*function ([^ (]*)/,s="name";r&&!(s in i)&&n(i,s,{configurable:!0,get:function(){try{return a.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-8cf9b942.ced9427d.js.map