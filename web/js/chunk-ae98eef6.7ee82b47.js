(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae98eef6"],{"246f":function(e,t,r){},"28c1":function(e,t,r){"use strict";var a=r("246f"),i=r.n(a);i.a},"32fb":function(e,t,r){"use strict";var a=r("d3f9"),i=r.n(a);i.a},"3c01":function(e,t,r){},"409d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.handleChangeShow,expression:"handleChangeShow"}],staticClass:"main-content"},[e._m(0),r("div",{staticClass:"content"},[r("div",{staticClass:"content-btn"},[r("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增报修")])],1),r("div",{},[r("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[r("template",{slot:"tabs"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"全部",name:"0"}}),r("el-tab-pane",{attrs:{label:"待分配",name:"1"}}),r("el-tab-pane",{attrs:{label:"已分配未接单",name:"2"}}),r("el-tab-pane",{attrs:{label:"已分配处理中",name:"3"}}),r("el-tab-pane",{attrs:{label:"已处理",name:"4"}}),r("el-tab-pane",{attrs:{label:"已确认已完成",name:"5"}}),r("el-tab-pane",{attrs:{label:"已关闭",name:"6"}}),r("el-tab-pane",{attrs:{label:"已作废",name:"7"}}),r("el-tab-pane",{attrs:{label:"已取消",name:"8"}})],1)],1),r("template",{slot:"footer"},[r("div",{staticClass:"table-footer"},[r("button",{on:{click:function(t){return e.onDetails(e.table_row)}}},[e._v("详情")]),r("button",{on:{click:function(t){return e.edit(e.table_row)}}},[e._v("编辑")]),r("button",{on:{click:function(t){return e.Dispatch(e.table_row)}}},[e._v("派工")]),r("button",{on:{click:function(t){return e.onVisit(e.table_row)}}},[e._v("回访")]),r("button",{on:{click:function(t){return e.onCancel(e.table_row)}}},[e._v("作废")]),r("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2)],1),r("addEidt",{ref:"addEdit",attrs:{drawerTitle:e.addEidtDrawerTitle,drawerVrisible:e.addEidt_vrisible},on:{submitSuccess:e.submitSuccess,handleClose:e.addEidtHandleClose}}),r("Dispatch",{ref:"Dispatch",attrs:{drawerTitle:"派工",drawerVrisible:e.Dispatch_vrisible},on:{submitSuccess:e.DispatchSuccess,handleClose:e.DispatchHandleClose}}),r("Drawer",{attrs:{drawerTitle:"回访",drawerVrisible:e.visit_vrisible},on:{drawerClose:e.visitClose}},[r("div",{staticStyle:{padding:"30px"}},[r("FromCard",[r("template",{slot:"title"},[e._v("基本信息")]),[r("VueForm",{ref:"visitFrom",attrs:{formObj:e.visitForm},on:{ruleSuccess:e.visitRuleSuccess}})]],2)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-orange",on:{click:function(t){return e.visitSubmit()}}},[r("span",[r("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),r("button",{staticClass:"btn-gray",on:{click:e.visitClose}},[r("span",[e._v("取消")])])])]),r("Drawer",{attrs:{drawerTitle:"作废",drawerVrisible:e.cancel_vrisible},on:{drawerClose:e.cancelClose}},[r("div",{staticStyle:{padding:"30px"}},[r("FromCard",[r("template",{slot:"title"},[e._v("作废原因")]),[r("VueForm",{ref:"cancelFrom",attrs:{formObj:e.cancelForm},on:{ruleSuccess:e.cancelRuleSuccess}})]],2)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-orange",on:{click:function(t){return e.cancelSubmit()}}},[r("span",[r("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),r("button",{staticClass:"btn-gray",on:{click:e.cancelClose}},[r("span",[e._v("取消")])])])])],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.handleChangeShow,expression:"!handleChangeShow"}]},[e.handleChangeShow?e._e():r("div",{staticClass:"main details-box"},[r("div",{staticClass:"head-box"},[e._m(1),r("div",{staticClass:"content"},[r("span",[e._v(e._s(e.tabsName))]),r("div",{staticClass:"flex justify-between align-center"},[r("div",[r("span",[e._v(e._s(e.table_row[0].code))])]),r("div",[r("button",{staticClass:"btn-orange",on:{click:function(t){e.handleChangeShow=!0}}},[r("span",[e._v(" 返回")])])])])])]),r("div",{staticClass:"box"},[e._m(2),e.detailsData.voRepair?r("div",{staticClass:"box-item"},[r("div",{staticClass:"item"},[e._m(3),r("div",[r("span",[e._v(e._s(1===e.detailsData.voRepair.type?"户内":"户外"))])])]),e._m(4),r("div",{staticClass:"item"},[e._m(5),r("div",[r("span",[e._v(e._s(e.detailsData.voRepair.repairName))])])]),r("div",{staticClass:"item"},[e._m(6),r("div",[r("span",[e._v(e._s(e.detailsData.voRepair.tel))])])]),r("div",{staticClass:"item"},[e._m(7),r("div",[r("span",[e._v(e._s(e.detailsData.voRepair.dispatchName))])])]),r("div",{staticClass:"item"},[e._m(8),r("div",[r("span",[e._v(e._s(e.detailsData.voRepair.reportDetail))])])]),r("div",{staticClass:"item"},[e._m(9),e.detailsData.voRepair.imgUrls.length?r("div",[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.$ImgUrl+e.detailsData.voRepair.imgUrls[0].url,fit:"fit"}})],1):e._e()])]):e._e()]),e.detailsData.voDispatch?r("div",{staticClass:"box"},[e._m(10),r("div",{},[r("div",{staticClass:"box-item"},[r("div",{staticClass:"item"},[e._m(11),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.workOrderTypeName))])])]),r("div",{staticClass:"item"},[e._m(12),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.workOrderTypeDetailName))])])]),r("div",{staticClass:"item"},[e._m(13),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.workOrderTimeLimitName))])])]),r("div",{staticClass:"item"},[e._m(14),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.operatorName))])])]),r("div",{staticClass:"item"},[e._m(15),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.dispatchDate))])])]),r("div",{staticClass:"item"},[e._m(16),r("div",[r("span",[e._v(e._s(e.detailsData.voDispatch.remake))])])])])])]):e._e(),r("div",{staticClass:"box"},[e._m(17),r("div",{},[r("tableData",{attrs:{config:e.handleConfig}})],1)]),e.detailsData.voHandleCompleteDetail?r("div",{staticClass:"box"},[e._m(18),r("div",{},[r("div",{staticClass:"box-item"},[r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(19),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.detail))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(20),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.materialList))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(21),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.laborCost?e.detailsData.voHandleCompleteDetail.laborCost:"0.00"))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(22),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.materialCost?e.detailsData.voHandleCompleteDetail.materialCost:"0.00"))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(23),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.totalCost?e.detailsData.voHandleCompleteDetail.totalCost:"0.00"))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(24),r("div",[r("el-radio-group",{attrs:{value:e.detailsData.voHandleCompleteDetail.repairResult}},[r("el-radio",{attrs:{label:1}},[e._v("完成")]),r("el-radio",{attrs:{label:2}},[e._v("未完成")])],1)],1)]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(25),r("div",[r("span",[e._v(e._s(e.detailsData.voHandleCompleteDetail.completeDate))])])])])])]):e._e(),e.detailsData.voEvaluation?r("div",{staticClass:"box"},[e._m(26),r("div",{},[r("div",{staticClass:"box-item"},[r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(27),r("div",[r("el-rate",{attrs:{value:e.detailsData.voEvaluation.evaluation_level/2,colors:e.colors,disabled:""}})],1)]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(28),r("div",[r("span",[e._v(e._s(e.detailsData.voEvaluation.evaluation_content))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(29),r("div",[r("span",[e._v(e._s(e.detailsData.voEvaluation.evaluation_date))])])])])])]):e._e(),r("div",{staticClass:"box"},[e._m(30),r("div",{},[e.detailsData.voRevisit?r("div",{staticClass:"box-item"},[r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(31),r("div",[r("span",[e._v(e._s(e.detailsData.voRevisit.revisitDetail))])])]),r("div",{staticClass:"item",staticStyle:{width:"100%"}},[e._m(32),r("div",[r("span",[e._v(e._s(e.detailsData.voRevisit.revisitDate))])])])]):e._e()])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-titel"},[r("span",[e._v("报事报修")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"titel"},[r("span",[e._v("报修详情")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("报修详情")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("报修区域")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item"},[r("div",{staticClass:"span"},[r("span",[e._v("报修来源")])]),r("div",[r("span",[e._v("业主来电")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("报修人")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("联系电话")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("分配人")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("报修详情")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("照片")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("派工详情")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("工单大类")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("工单子类")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("工单时限")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("指派给")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("预约时间")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("派工备注")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("处理进程记录")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("处理完成情况")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("完成处理情况")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("更换材料清单")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("人工费")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("材料费 ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("总计费 ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("报修结果")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("完成时间")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("客户评价")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("评价")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("评价内容")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("评价时间")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("span",[e._v("回访")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("回访结果")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"span"},[r("span",[e._v("回访时间")])])}],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[r("FromCard",{staticStyle:{margin:"30px"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),r("VueForm",{ref:"vueForm",attrs:{formObj:e.reportRepairFrom},on:{ruleSuccess:e.ruleSuccess},scopedSlots:e._u([{key:"repairman",fn:function(){return[r("el-select",{staticStyle:{width:"240px"},attrs:{"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",placeholder:"请选择"},on:{change:e.change,focus:e.sefocus},model:{value:e.reportRepairFrom.ruleForm.repairman,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"repairman",t)},expression:"reportRepairFrom.ruleForm.repairman"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])},[r("template",{slot:"type"},[r("el-radio",{attrs:{label:"1"},model:{value:e.reportRepairFrom.ruleForm.type,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"type",t)},expression:"reportRepairFrom.ruleForm.type"}},[e._v("户外")]),r("el-radio",{attrs:{label:"2"},model:{value:e.reportRepairFrom.ruleForm.type,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"type",t)},expression:"reportRepairFrom.ruleForm.type"}},[e._v("户内")])],1),r("template",{slot:"fileUrls"},[[r("el-upload",{attrs:{action:e.$baseUrl+"upload/uploadRepair","on-success":e.voteImgeSuccess,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[r("div",{staticClass:"sys-image",staticStyle:{width:"104px",height:"104px"}},[e.fileUrls?r("div",[e.editBool?r("el-image",{staticStyle:{width:"104px",height:"104px"},attrs:{src:""+e.$ImgUrl+e.fileUrls}}):r("el-image",{staticStyle:{width:"104px",height:"104px"},attrs:{src:e.$ImgUrl+"/temp"+e.fileUrls}})],1):r("div",[r("i",{staticClass:"el-icon-plus"}),r("p",[e._v("上传照片")])])])])]],2)],2)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[r("span",[r("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),r("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[r("span",[e._v("取消")])])])],1)],1)},n=[],o=r("48e8"),l=r("2b74"),u={props:{drawerVrisible:{type:Boolean,default:function(){return!1}},drawerTitle:{type:String,default:function(){return""}}},data:function(){return{options:[],loading:!1,drawer_vrisible:!1,editBool:!1,editId:0,fileUrls:"",reportRepairFrom:{ruleForm:{type:"1",fileUrls:[],reportDetail:null,repairman:null,tel:null,repairDate:null,repairFrom:1},form_item:[{type:"Slot",label:"报修区域",placeholder:"请输入",width:"100%",prop:"type",slotName:"type"},{type:"Slot",label:"图片",placeholder:"请输入",width:"100%",prop:"fileUrls",slotName:"fileUrls"},{type:"textarea",label:"报修详情",placeholder:"请输入",width:"100%",rows:5,prop:"reportDetail"},{type:"Slot",label:"报修人",placeholder:"请输入",width:"50%",slotName:"repairman",prop:"repairman"},{type:"Input",label:"联系方式",placeholder:"请输入",width:"50%",prop:"tel"},{type:"DateTime",label:"报修时间",placeholder:"请输入",width:"50%",prop:"repairDate"},{type:"Select",label:"报修来源",placeholder:"请输入",disabled:!0,options:[{value:1,label:"业主来电"}],width:"50%",prop:"repairFrom"}],rules:{type:[{required:!0,message:"请填写投票标题",trigger:"blur"}],fileUrls:[{required:!0,message:"请上传图片",trigger:"change"}],reportDetail:[{required:!0,message:"请输入报修详情",trigger:"change"}],tel:[{required:!0,message:"请输入电话号码",trigger:"blur"}],repairDate:[{required:!0,message:"请选择报修时间",trigger:"blur"}],repairman:[{required:!0,message:"请填写投票内容",trigger:"blur"}],repairFrom:[{required:!0,message:"请输入报修人",trigger:"change"}]}},importHeaders:{"X-Admin-Token":sessionStorage.getItem("X-Admin-Token")}}},created:function(){this.getUserList()},methods:{getUserList:function(e){var t=this,r={pageNum:1,size:20,name:e};this.loading=!0,Object(l["A"])(r).then((function(e){t.options=e.tableList,t.loading=!1}))},remoteMethod:function(e){this.getUserList(e)},sefocus:function(){this.getUserList()},change:function(e){console.log(e)},voteImgeSuccess:function(e,t){this.fileUrls=e.url,this.editBool=!1,this.reportRepairFrom.ruleForm.fileUrls[0]=e.url},ruleSuccess:function(e){var t=this,r={type:parseInt(this.reportRepairFrom.ruleForm.type),fileUrls:[this.fileUrls],reportDetail:this.reportRepairFrom.ruleForm.reportDetail,repairman:this.reportRepairFrom.ruleForm.repairman,tel:this.reportRepairFrom.ruleForm.tel,repairDate:this.reportRepairFrom.ruleForm.repairDate,froms:1};this.editId?(r.id=this.editId,Object(o["E"])(r).then((function(e){e.status&&(t.$message({message:e.message,type:"success"}),t.$emit("submitSuccess"),t.drawerClose())}))):Object(o["D"])(r).then((function(e){e.status&&(t.$message({message:e.message,type:"success"}),t.$emit("submitSuccess"),t.drawerClose())}))},onSubmit:function(){this.$refs.vueForm.submitForm()},edit:function(e){var t=this;this.addEidt_vrisible=!0;var r={id:e};Object(o["B"])(r).then((function(e){console.log(e),t.editBool=!0,t.editId=e.id,t.reportRepairFrom.ruleForm.type=e.type+"",e.imgUrls[0]?(t.reportRepairFrom.ruleForm.fileUrls=e.imgUrls[0].url,t.fileUrls=e.imgUrls[0].url):(t.reportRepairFrom.ruleForm.fileUrls=[],t.fileUrls=""),console.log(t.reportRepairFrom.ruleForm.fileUrls),console.log(t.fileUrls),t.reportRepairFrom.ruleForm.reportDetail=e.reportDetail,t.reportRepairFrom.ruleForm.repairman=e.repairman,t.reportRepairFrom.ruleForm.tel=e.tel,t.reportRepairFrom.ruleForm.repairDate=e.repairDate}))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2,r="image/png"===e.type,a="image/jpeg"===e.type;return r||a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),(r||a)&&t},drawerClose:function(){this.drawer_vrisible=!1,this.$refs.vueForm.reset(),this.editId=0,this.reportRepairFrom.ruleForm.fileUrls=[],this.$emit("handleClose","Close")}},watch:{drawerVrisible:{handler:function(e){this.drawer_vrisible=e}}}},c=u,d=(r("32fb"),r("2877")),p=Object(d["a"])(c,s,n,!1,null,"0107b25b",null),m=p.exports,h=r("b07e"),f={data:function(){return{colors:["#FB4702","#FB4702","#FB4702"],tabsName:"全部",handleConfig:{thead:[{label:"操作时间",prop:"operationDate",width:"auto"},{label:"操作类型",prop:"operatorType",width:"auto",type:"function",callback:function(e,t){switch(e.operationType){case 1:return"提交报修";case 2:return"派单";case 3:return"开始处理";case 4:return"处理完成";case 5:return"确认";case 6:return"回访";case 7:return"回退";case 8:return"作废";case 9:return"取消"}}},{label:"操作人",prop:"operatorName",width:"auto"},{label:"操作内容",prop:"operatorContent",width:"auto"}],table_data:[],loading:!0,checkbox:!1},addEidtDrawerTitle:"",addEidt_vrisible:!1,Dispatch_vrisible:!1,visit_vrisible:!1,cancel_vrisible:!1,handleChangeShow:!0,detailsData:null,table_row:[],visitForm:{ruleForm:{content:"",revisitDate:null},form_item:[{type:"DateTime",label:"报修时间",placeholder:"请输入",width:"50%",prop:"revisitDate"},{type:"textarea",label:"回访结果",placeholder:"请输入",width:"100%",rows:5,prop:"content"}],rules:{content:[{required:!0,message:"请填写回访结果",trigger:"blur"}],revisitDate:[{required:!0,message:"请填写回访时间",trigger:"change"}]}},cancelForm:{ruleForm:{content:""},form_item:[{type:"textarea",label:"作废原因",placeholder:"请输入",width:"100%",rows:5,prop:"content"}],rules:{content:[{required:!0,message:"请填写回访结果",trigger:"blur"}]}},config:{thead:[{label:"序号",type:"index",width:"80"},{label:"报修单号",prop:"code",width:"180"},{label:"状态",prop:"status",width:"180",type:"function",callback:function(e,t){switch(e.status){case 1:return"待分配";case 2:return"已分配未接单";case 3:return"已分配处理中";case 4:return"已处理";case 5:return"已分配处理中";case 6:return"已关闭";case 7:return"已作废";case 8:return"已取消";default:break}}},{label:"房屋信息",prop:"roomName",width:"180"},{label:"报修人",prop:"repairmanName",width:"120"},{label:"报修人电话",prop:"repairTel",width:"180"},{label:"报修时间",prop:"repairDate",width:"180"},{label:"分配人",prop:"distributorName",width:"120"},{label:"维修人",prop:"operatorName",width:"120"},{label:"工单时限",prop:"workOrderTimeLimit",width:"180"},{label:"来源",prop:"fromsName",width:"180"}],url:"reportRepairList",table_data:[],search_item:[{type:"Input",label:"报修单号",placeholder:"请输入",prop:"code"},{type:"Input",label:"报修人",placeholder:"请输入",prop:"repairman"},{type:"Input",label:"房屋信息",placeholder:"单元/楼栋/房号",prop:"roomName"},{type:"startDate",label:"开始日期",placeholder:"请选择开始日期",prop:"repairDateStart"},{type:"endDate",label:"结束时间",placeholder:"请选择结束日期",prop:"repairDateEnd"},{type:"Input",label:"分配人",placeholder:"请输入分配人",prop:"distributor"},{type:"Input",label:"维修人",placeholder:"请输入维修人\t",prop:"operator"}],data:{pageNum:1,size:10}},activeName:0}},components:{addEidt:m,Dispatch:h["a"]},methods:{onDetails:function(e){var t=this;e.length>1?this.$message.error("只能操作一条数据"):e.length?Object(o["A"])({id:e[0].id}).then((function(e){console.log(e),t.detailsData=e,t.handleConfig.table_data=e.voProcessRecordList,t.handleConfig.loading=!1,t.handleChangeShow=!1})):this.$message.error("请选择")},onCancel:function(e){e.length>1?this.$message.error("只能操作一条数据"):e.length?this.cancel_vrisible=!0:this.$message.error("请选择")},cancelClose:function(){this.cancel_vrisible=!1,this.$refs.cancelFrom.reset()},cancelRuleSuccess:function(){var e=this,t={id:this.table_row[0].id,content:this.cancelForm.ruleForm.content};Object(o["j"])(t).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.$refs.table.requestData(),e.cancelClose())}))},cancelSubmit:function(){this.$refs.cancelFrom.submitForm()},visitClose:function(){this.visit_vrisible=!1,this.$refs.visitFrom.reset()},visitRuleSuccess:function(){var e=this,t={id:this.table_row[0].id,content:this.visitForm.ruleForm.content,revisitDate:this.visitForm.ruleForm.revisitDate};Object(o["m"])(t).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.$refs.table.requestData(),e.visitClose())}))},visitSubmit:function(){this.$refs.visitFrom.submitForm()},onVisit:function(e){e.length>1?this.$message.error("只能操作一条数据的详情"):e.length?this.visit_vrisible=!0:this.$message.error("请选择")},Dispatch:function(e){e.length>1?this.$message.error("只能操作一条数据"):1===e[0].status?e.length?(this.Dispatch_vrisible=!0,this.$refs.Dispatch.details(e[0].id)):this.$message.error("请选择"):this.$message.error("只能待分配状态可派工")},DispatchSuccess:function(){this.$refs.table.requestData()},DispatchHandleClose:function(){this.Dispatch_vrisible=!1},edit:function(e){e.length>1?this.$message.error("只能查看一条数据的详情"):e.length?(this.addEidt_vrisible=!0,this.$refs.addEdit.edit(e[0].id)):this.$message.error("请选择")},add:function(){this.addEidt_vrisible=!0,this.addEidtDrawerTitle="新增保修"},addEidtHandleClose:function(){this.addEidt_vrisible=!1},handleClick:function(e,t){this.tabsName=e.label;var r=null;r=0!=this.activeName?this.activeName:null;var a={pageNum:1,size:10,status:r};this.$refs.table.requestData(a)},tableCheck:function(e){this.table_row=e},del:function(e){var t=this;if(e.length){for(var r=[],a=0;a<this.table_row.length;a++)r.push(this.table_row[a].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(r)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")},submitSuccess:function(){this.$refs.table.loadData()}}},v=f,b=(r("e35d"),r("4f9d"),Object(d["a"])(v,a,i,!1,null,"fd3797f2",null));t["default"]=b.exports},"48e8":function(e,t,r){"use strict";r.d(t,"F",(function(){return i})),r.d(t,"G",(function(){return s})),r.d(t,"K",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"H",(function(){return u})),r.d(t,"I",(function(){return c})),r.d(t,"O",(function(){return d})),r.d(t,"Q",(function(){return p})),r.d(t,"P",(function(){return m})),r.d(t,"R",(function(){return h})),r.d(t,"T",(function(){return f})),r.d(t,"S",(function(){return v})),r.d(t,"e",(function(){return b})),r.d(t,"h",(function(){return _})),r.d(t,"i",(function(){return g})),r.d(t,"f",(function(){return w})),r.d(t,"c",(function(){return C})),r.d(t,"a",(function(){return y})),r.d(t,"J",(function(){return D})),r.d(t,"N",(function(){return F})),r.d(t,"M",(function(){return T})),r.d(t,"L",(function(){return S})),r.d(t,"C",(function(){return k})),r.d(t,"D",(function(){return O})),r.d(t,"k",(function(){return E})),r.d(t,"E",(function(){return $})),r.d(t,"A",(function(){return q})),r.d(t,"m",(function(){return R})),r.d(t,"j",(function(){return x})),r.d(t,"l",(function(){return N})),r.d(t,"B",(function(){return U})),r.d(t,"o",(function(){return I})),r.d(t,"n",(function(){return P})),r.d(t,"x",(function(){return G})),r.d(t,"w",(function(){return B})),r.d(t,"z",(function(){return j})),r.d(t,"y",(function(){return L})),r.d(t,"g",(function(){return V})),r.d(t,"q",(function(){return H})),r.d(t,"s",(function(){return A})),r.d(t,"p",(function(){return M})),r.d(t,"r",(function(){return z})),r.d(t,"Y",(function(){return J})),r.d(t,"gb",(function(){return W})),r.d(t,"eb",(function(){return X})),r.d(t,"Z",(function(){return Y})),r.d(t,"bb",(function(){return K})),r.d(t,"V",(function(){return Q})),r.d(t,"ab",(function(){return Z})),r.d(t,"U",(function(){return ee})),r.d(t,"X",(function(){return te})),r.d(t,"cb",(function(){return re})),r.d(t,"db",(function(){return ae})),r.d(t,"fb",(function(){return ie})),r.d(t,"W",(function(){return se})),r.d(t,"u",(function(){return ne})),r.d(t,"v",(function(){return oe})),r.d(t,"t",(function(){return le}));var a=r("b775");r("2c37");function i(e){return a["a"].request({method:"GET",url:"/userArticleOut/countArticleOutNow",params:e})}function s(e){return a["a"].request({method:"GET",url:"/userArticleOut/countPerformed",params:e})}function n(e){return a["a"].request({method:"GET",url:"/visitors/countVisitorsNew",params:e})}function o(e){return a["a"].request({method:"GET",url:"/advice/countComplaintNew",params:e})}function l(e){return a["a"].request({method:"GET",url:"/advice/countPraiseNew",params:e})}function u(e){return a["a"].request({method:"GET",url:"/userDecoration/countDecorationNow",params:e})}function c(e){return a["a"].request({method:"GET",url:"/userDecoration/countPerformed",params:e})}function d(e){return a["a"].request({method:"GET",url:"/vote/countVoteExpectedStart",params:e})}function p(e){return a["a"].request({method:"GET",url:"/vote/findDetailById",params:e})}function m(e){return a["a"].request({method:"GET",url:"/vote/findById",params:e})}function h(e){return a["a"].request({method:"POST",url:"/vote/insert",data:e})}function f(e){return a["a"].request({method:"POST",url:"/vote/update",data:e})}function v(e){return a["a"].request({method:"POST",url:"/vote/release",data:e})}function b(e){return a["a"].request({method:"GET",url:"/advice/findById",params:e})}function _(e){return a["a"].request({method:"GET",url:"/complaintPraise/findById",params:e})}function g(e){return a["a"].request({method:"POST",url:"/complaintPraise/insertDetail",data:e})}function w(e){return a["a"].request({method:"POST",url:"/advice/insertDetail",data:e})}function C(e){return a["a"].request({method:"GET",url:"/advice/countConsultNew",params:e})}function y(e){return a["a"].request({method:"GET",url:"/advice/countAdviceNew",params:e})}function D(e){return a["a"].request({method:"POST",url:"/visitors/cancel",data:e})}function F(e){return a["a"].request({method:"POST",url:"/visitors/update",data:e})}function T(e){return a["a"].request({method:"GET",url:"/visitors/listDetail",params:e})}function S(e){return a["a"].request({method:"GET",url:"/visitors/findById",params:e})}function k(e){return a["a"].request({method:"GET",url:"/reportRepair/findRepairDetail",params:e})}function O(e){return a["a"].request({method:"POST",url:"/reportRepair/insert",data:e})}function E(e){return a["a"].request({method:"POST",url:"/dispatch/dispatch",data:e})}function $(e){return a["a"].request({method:"POST",url:"/reportRepair/update",data:e})}function q(e){return a["a"].request({method:"GET",url:"/dispatch/repairWorkOrderDetail",params:e})}function R(e){return a["a"].request({method:"POST",url:"/dispatch/revisit",data:e})}function x(e){return a["a"].request({method:"POST",url:"/dispatch/cancel",data:e})}function N(e){return a["a"].request({method:"GET",url:"/dispatch/findSysUserLikeActualName",params:e})}function U(e){return a["a"].request({method:"GET",url:"/reportRepair/findById",params:e})}function I(e){return a["a"].request({method:"POST",url:"/facilitiesManage/insert",data:e})}function P(e){return a["a"].request({method:"POST",url:"/facilitiesCategory/insert",data:e})}function G(e){return a["a"].request({method:"POST",url:"/questionnaire/insert",data:e})}function B(e){return a["a"].request({method:"GET",url:"/questionnaire/findById",params:e})}function j(e){return a["a"].request({method:"POST",url:"/questionnaire/update",data:e})}function L(e){return a["a"].request({method:"GET",url:"/questionnaire/reportAnalysis",params:e})}function V(e){return a["a"].request({method:"GET",url:"/article/findById",params:e})}function H(e){return a["a"].request({method:"POST",url:"/gambit/insert",data:e})}function A(e){return a["a"].request({method:"POST",url:"/gambit/update",data:e})}function M(e){return a["a"].request({method:"GET",url:"/gambit/findById",params:e})}function z(e){return a["a"].request({method:"POST",url:"/gambitTheme/recovery",data:e})}function J(e){return a["a"].request({method:"GET",url:"/workOrderType/list",params:e})}function W(e){return a["a"].request({method:"POST",url:"/workOrderType/update",data:e})}function X(e){return a["a"].request({method:"POST",url:"/workOrderType/insert",data:e})}function Y(e){return a["a"].request({method:"GET",url:"/workOrderType/delete",params:e})}function K(e){return a["a"].request({method:"POST",url:"/workOrderTypeDetail/insert",data:e})}function Q(e){return a["a"].request({method:"POST",url:"/workOrderTimeLimit/insert",data:e})}function Z(e){return a["a"].request({method:"POST",url:"/workOrderTypeDetail/delete",data:e})}function ee(e){return a["a"].request({method:"GET",url:"/workOrderTimeLimit/findById",params:e})}function te(e){return a["a"].request({method:"POST",url:"/workOrderTimeLimit/update",data:e})}function re(e){return a["a"].request({method:"POST",url:"/workOrderTypeDetail/update",data:e})}function ae(e){return a["a"].request({method:"GET",url:"/workOrderTypeDetail/findById",params:e})}function ie(e){return a["a"].request({method:"GET",url:"/workOrderTypeDetail/list",params:e})}function se(e){return a["a"].request({method:"GET",url:"/workOrderTimeLimit/list",params:e})}function ne(e){return a["a"].request({method:"POST",url:"/ownersCommittee/insert",data:e})}function oe(e){return a["a"].request({method:"POST",url:"/ownersCommittee/update",data:e})}function le(e){return a["a"].request({method:"GET",url:"/ownersCommittee/findById",params:e})}},"4f9d":function(e,t,r){"use strict";var a=r("3c01"),i=r.n(a);i.a},"97eb":function(e,t,r){},b07e:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[r("FromCard",{staticStyle:{margin:"30px"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),r("VueForm",{attrs:{formObj:e.DispatchFrom}},[r("template",{slot:"type"},[1===e.DispatchFrom.ruleForm.type?r("span",[e._v("户内")]):e._e(),2===e.DispatchFrom.ruleForm.type?r("span",[e._v("户外")]):e._e()]),r("template",{slot:"fileUrls"},[[r("div",[e.editBool?r("el-image",{staticStyle:{width:"104px",height:"104px"},attrs:{src:""+e.$ImgUrl+e.fileUrls}}):r("el-image",{staticStyle:{width:"104px",height:"104px"},attrs:{src:e.$ImgUrl+"/temp"+e.fileUrls}})],1)]],2)],2)],1),r("FromCard",{staticStyle:{margin:"30px"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),r("VueForm",{ref:"vueForm",attrs:{formObj:e.reportRepairFrom},on:{ruleSuccess:e.ruleSuccess},scopedSlots:e._u([{key:"operator",fn:function(){return[r("el-select",{staticStyle:{width:"240px"},attrs:{"remote-method":e.remoteMethod,loading:e.loading,remote:"",filterable:"",placeholder:"请选择"},on:{change:e.change,focus:e.sefocus},model:{value:e.reportRepairFrom.ruleForm.operator,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"operator",t)},expression:"reportRepairFrom.ruleForm.operator"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])},[r("template",{slot:"type"},[r("el-radio",{attrs:{label:"1"},model:{value:e.reportRepairFrom.ruleForm.type,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"type",t)},expression:"reportRepairFrom.ruleForm.type"}},[e._v("户外")]),r("el-radio",{attrs:{label:"2"},model:{value:e.reportRepairFrom.ruleForm.type,callback:function(t){e.$set(e.reportRepairFrom.ruleForm,"type",t)},expression:"reportRepairFrom.ruleForm.type"}},[e._v("户内")])],1)],2)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[r("span",[r("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),r("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[r("span",[e._v("取消")])])])],1)],1)},i=[],s=(r("d81d"),r("b0c0"),r("48e8")),n=(r("2b74"),{props:{drawerVrisible:{type:Boolean,default:function(){return!1}},drawerTitle:{type:String,default:function(){return""}}},data:function(){var e={pageNum:1,size:10},t=[];Object(s["W"])(e).then((function(e){e.tableList.map((function(e){t.push({value:e.id,label:e.name})}))}));var r=[],a={id:1};return Object(s["fb"])(a).then((function(e){console.log(e),e.map((function(e){r.push({value:e.id,label:e.name})}))})),{options:[],loading:!1,drawer_vrisible:!1,editBool:!1,editId:0,fileUrls:"",workOrderTypeId:null,dispatchListId:null,DispatchFrom:{ruleForm:{type:null,froms:"业主来电",fileUrls:[],reportDetail:null,repairman:null,tel:null,repairDate:null,repairFrom:1,dispatchName:null},form_item:[{type:"Slot",label:"报修区域",width:"50%",prop:"type",slotName:"type"},{type:"span",label:"报修来源",placeholder:"请输入",width:"50%",prop:"froms"},{type:"span",label:"报修人",placeholder:"请输入",width:"50%",prop:"repairName"},{type:"span",label:"联系电话",placeholder:"请输入",width:"50%",prop:"tel"},{type:"span",label:"分配人",placeholder:"请输入",width:"50%",prop:"dispatchName"},{type:"span",label:"预约时间",placeholder:"请输入",width:"50%",prop:"repairDate"},{type:"span",label:"报修详情",width:"50%",prop:"reportDetail"},{type:"span",label:"照片",width:"50%",prop:"fileUrls"}]},reportRepairFrom:{ruleForm:{workOrderTypeText:null,workOrderTimeLimit:null,workOrderTypeDetail:null,type:null,remake:null,dispatchDate:null,operator:null},form_item:[{type:"span",label:"工单大类",placeholder:"请输入",width:"50%",prop:"workOrderTypeText"},{type:"Select",label:"工单子类",placeholder:"请输入",options:r,width:"50%",prop:"workOrderTypeDetail"},{type:"Select",label:"工单时限",placeholder:"请输入",options:t,width:"50%",prop:"workOrderTimeLimit"},{type:"Select",label:"派工类型",placeholder:"请输入",options:[{value:1,label:"无偿服务"},{value:2,label:"有偿服务"}],width:"50%",prop:"type"},{type:"Slot",label:"指派给",placeholder:"请输入",width:"50%",prop:"operator",slotName:"operator"},{type:"DateTime",label:"预约时间 ",placeholder:"请输入",width:"50%",prop:"dispatchDate"},{type:"textarea",label:"派工备注",placeholder:"请输入",width:"100%",rows:5,prop:"remake"}],rules:{workOrderTypeText:[{required:!0,message:"",trigger:"blur"}],workOrderTypeDetail:[{required:!0,message:"请选择工单子类",trigger:"change"}],workOrderTimeLimit:[{required:!0,message:"请选择工单时限",trigger:"change"}],operator:[{required:!0,message:"请选择指派给",trigger:"change"}],type:[{required:!0,message:"请选择派工类型",trigger:"change"}],remake:[{required:!0,message:"请输入派工备注",trigger:"blur"}],dispatchDate:[{required:!0,message:"请选择预约时间",trigger:"change"}]}}}},created:function(){var e=this;console.log(this.reportRepairFrom.ruleForm.workOrderTimeLimit),console.log(this.reportRepairFrom.ruleForm.workOrderTypeDetail);Object(s["Y"])().then((function(t){e.reportRepairFrom.ruleForm.workOrderTypeText=t[0].name,e.workOrderTypeId=t[0].id}))},mounted:function(){var e=this;Object(s["l"])({actualName:""}).then((function(t){console.log(t),e.options=t.options}))},methods:{remoteMethod:function(e){var t=this;this.loading=!0,Object(s["l"])({actualName:e}).then((function(e){t.loading=!1,t.options=e.data.map((function(e){return{value:e.id,label:e.actualName}}))}))},sefocus:function(){var e=this;this.loading=!0,Object(s["l"])({actualName:""}).then((function(t){console.log(t),e.loading=!1,e.options=t.data.map((function(e){return{value:e.id,label:e.actualName}}))}))},change:function(e){console.log(e)},ruleSuccess:function(e){var t=this,r={dispatchListId:this.dispatchListId,workOrderType:this.workOrderTypeId,workOrderTypeDetail:this.reportRepairFrom.ruleForm.workOrderTypeDetail,workOrderTimeLimit:this.reportRepairFrom.ruleForm.workOrderTimeLimit,type:this.reportRepairFrom.ruleForm.type,dispatchDate:this.reportRepairFrom.ruleForm.dispatchDate,operator:this.reportRepairFrom.ruleForm.operator,remake:this.reportRepairFrom.ruleForm.remake};Object(s["k"])(r).then((function(e){console.log(e),e.status&&(t.$message({message:e.message,type:"success"}),t.$emit("submitSuccess"),t.drawerClose())}))},onSubmit:function(){this.$refs.vueForm.submitForm()},details:function(e){var t=this,r={id:e};Object(s["C"])(r).then((function(r){t.dispatchListId=e,t.DispatchFrom.ruleForm.type=r.type,t.DispatchFrom.ruleForm.dispatchName=r.dispatchName,t.DispatchFrom.ruleForm.reportDetail=r.reportDetail,t.DispatchFrom.ruleForm.repairName=r.repairName,t.DispatchFrom.ruleForm.tel=r.tel,t.DispatchFrom.ruleForm.repairDate=r.repairDate}))},drawerClose:function(){this.drawer_vrisible=!1,this.$refs.vueForm.reset(),this.$emit("handleClose","Close")}},watch:{drawerVrisible:{handler:function(e){this.drawer_vrisible=e}}}}),o=n,l=(r("28c1"),r("2877")),u=Object(l["a"])(o,a,i,!1,null,"bdff8776",null);t["a"]=u.exports},b0c0:function(e,t,r){var a=r("83ab"),i=r("9bf2").f,s=Function.prototype,n=s.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in s)&&i(s,l,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(e){return""}}})},d3f9:function(e,t,r){},e35d:function(e,t,r){"use strict";var a=r("97eb"),i=r.n(a);i.a}}]);
//# sourceMappingURL=chunk-ae98eef6.7ee82b47.js.map