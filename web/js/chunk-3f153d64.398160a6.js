(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f153d64"],{"1d9f":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[e._m(0),r("div",{staticClass:"content"},[r("div",{staticClass:"content-btn"},[r("el-button",{staticClass:"init-button",attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增房屋")])],1),r("VueTable",{ref:"table",attrs:{config:e.config},on:{tableCheck:e.tableCheck}},[r("template",{slot:"footer"},[r("div",{staticClass:"table-footer"},[r("button",{on:{click:function(t){return e.revises(e.table_row)}}},[e._v("修改")]),r("button",{on:{click:function(t){return e.del(e.table_row)}}},[e._v("删除")])])])],2)],1),r("addEidt",{ref:"addEidt",attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{handleClose:e.handleClose}})],1)},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-titel"},[r("span",[e._v("房产管理")])])}],n=r("2b74"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Drawer",{attrs:{drawerTitle:e.drawerTitle,drawerVrisible:e.drawer_vrisible},on:{drawerClose:e.drawerClose}},[r("FromCard",{staticStyle:{margin:"30px"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),r("VueForm",{ref:"childFroms",attrs:{formObj:e.fromjson},scopedSlots:e._u([{key:"constructionArea",fn:function(){return[r("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.fromjson.ruleForm.constructionArea,callback:function(t){e.$set(e.fromjson.ruleForm,"constructionArea",t)},expression:"fromjson.ruleForm.constructionArea"}},[r("i",{staticClass:"metre",staticStyle:{"font-style":"normal"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("㎡")])])]},proxy:!0},{key:"indoorArea",fn:function(){return[r("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.fromjson.ruleForm.indoorArea,callback:function(t){e.$set(e.fromjson.ruleForm,"indoorArea",t)},expression:"fromjson.ruleForm.indoorArea"}},[r("i",{staticClass:"metre",staticStyle:{"font-style":"normal"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("㎡")])])]},proxy:!0}])})],1),e._l(e.froms,(function(t,o){return r("div",{key:t.key,staticStyle:{margin:"30px"}},[r("FromCard",[r("span",{attrs:{slot:"title"},slot:"title"},[e._v("业主关联 "+e._s(o+1))]),r("span",{attrs:{slot:"btn"},slot:"btn"},[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.del(t)}}},[r("span",{staticStyle:{color:"#fb4702"}},[e._v("删除")])])],1),r("div",{},[r("VueForm",{ref:"childFrom",refInFor:!0,attrs:{formObj:t.addForm},on:{ruleSubmit:e.ruleSubmit}})],1)])],1)})),r("div",{staticStyle:{display:"flex","justify-content":"center"}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.addForms()}}},[r("span",{staticStyle:{color:"#fb4702"}},[e._v("添加")])])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("button",{staticClass:"btn-orange",on:{click:function(t){return e.onSubmit()}}},[r("span",[r("i",{staticClass:"el-icon-circle-check"}),e._v("提交")])]),r("button",{staticClass:"btn-gray",on:{click:e.drawerClose}},[r("span",[e._v("取消")])])])],2)],1)},a=[],s=(r("c975"),r("d81d"),r("a434"),r("b0c0"),{props:{drawerVrisible:{type:Boolean,default:function(){return!1}},drawerTitle:{type:String,default:function(){return""}}},data:function(){return{drawer_vrisible:!1,bool:!1,fromjson:{ruleForm:{buildingId:null,buildingUnitId:null,roomNumber:null,status:null,type:null,constructionArea:null,indoorArea:null},rules:{buildingName:[{required:!0,message:"请填楼栋",trigger:"blur"}]},form_item:[{type:"Select",label:"楼栋",placeholder:"请输入",options:[],width:"50%",prop:"buildingId"},{type:"Select",label:"单元号",placeholder:"请输入",options:[],width:"50%",prop:"buildingUnitId"},{type:"Input",label:"房屋名称",placeholder:"请输入",width:"50%",prop:"roomNumber"},{type:"Select",label:"房屋状态",placeholder:"请输入",options:[{value:1,label:"入住"},{value:2,label:"装修"},{value:3,label:"空置"},{value:4,label:"未售"},{value:5,label:"已租"}],width:"50%",prop:"status"},{type:"Slot",label:"建筑面积",placeholder:"请输入",width:"50%",prop:"constructionArea",slotName:"constructionArea"},{type:"Select",label:"房屋类型",placeholder:"请输入",options:[{value:1,label:"住宅"},{value:2,label:"公寓"},{value:3,label:"别墅"},{value:4,label:"商铺"}],width:"50%",prop:"type"},{type:"Slot",label:"室内面积",placeholder:"请输入",width:"50%",prop:"indoorArea",slotName:"indoorArea"}]},froms:[]}},mounted:function(){var e=this;Object(n["k"])().then((function(t){e.fromjson.form_item[0].options=t}))},methods:{drawerClose:function(){this.drawer_vrisible=!1,this.froms=[],this.$refs.childFroms.reset(),this.$emit("handleClose","Close")},ruleSubmit:function(e){this.bool=e},onSubmit:function(){var e=this,t=[];if(this.froms.map((function(e){t.push(e.addForm.ruleForm)})),t.length>0)for(var r=0;r<t.length;r++)if(this.$refs.childFrom[r].submitForm(),!this.froms[r].addForm.ruleForm.name)return;var o={estate:{buildingUnitId:this.fromjson.ruleForm.buildingUnitId,roomNumber:this.fromjson.ruleForm.roomNumber,status:this.fromjson.ruleForm.status,type:this.fromjson.ruleForm.type,constructionArea:parseInt(this.fromjson.ruleForm.constructionArea),indoorArea:parseInt(this.fromjson.ruleForm.indoorArea)},residentList:t};console.log(o),Object(n["w"])(o).then((function(t){t.status&&(e.$message({message:t.message,type:"success"}),e.drawerClose())}))},edit:function(e){var t={id:e};Object(n["j"])(t).then((function(e){console.log(e),console.log(e.userResidentList)})),this.drawer_vrisible=!0},del:function(e){console.log(e);var t=this.froms.indexOf(e);-1!==t&&this.froms.splice(t,1)},addForms:function(){this.froms.push({addForm:{ruleForm:{tel:null,name:null,idType:null,idNumber:null},rules:{name:[{required:!0,message:"请填写业主姓名",trigger:"blur"}],no:[{required:!0,message:"请填写楼栋名称",trigger:"blur"}]},form_item:[{type:"Input",label:"业主姓名",placeholder:"请输入",width:"50%",prop:"name"},{type:"Int",label:"联系方式",placeholder:"请输入",width:"50%",prop:"tel"},{type:"Select",label:"证件类型",placeholder:"请输入",options:[{value:1,label:"身份证"},{value:2,label:"营业执照"}],width:"50%",prop:"idType"},{type:"Input",label:"证件号码",placeholder:"请输入",width:"50%",prop:"idNumber"}]},key:Date.now()})},unitData:function(e){var t=this,r={id:e};Object(n["r"])(r).then((function(e){t.fromjson.form_item[1].options=e}))}},watch:{drawerVrisible:{handler:function(e){this.drawer_vrisible=e}},"fromjson.ruleForm.buildingId":{handler:function(e){this.unitData(e),this.fromjson.ruleForm.buildingUnitId=null},deep:!0}}}),u=s,c=r("2877"),d=Object(c["a"])(u,i,a,!1,null,"646c1ac2",null),p=d.exports,f={components:{addEidt:p},data:function(){return{drawerTitle:"",drawer_vrisible:!1,table_row:[],config:{search_item:[{type:"Input",label:"房屋信息",placeholder:"楼栋-单元-室号",prop:"roomName"},{type:"select",label:"房屋状态",placeholder:"请输入内容",options:[{value:1,label:"入住"},{value:2,label:"装修"},{value:3,label:"空置"},{value:4,label:"为售"},{value:5,label:"已租"}],prop:"status"},{type:"Input",label:"业主",placeholder:"请输入",prop:"residentName"},{type:"Input",label:"手机号",placeholder:"请输入",prop:"residentTel"}],thead:[{label:"序号",type:"index",width:"80"},{label:"楼栋",prop:"buildingName",width:"auto"},{label:"单元（号）",prop:"buildingUnitNo",width:"auto"},{label:"房屋名称",prop:"roomNumber",width:"auto"},{label:"房屋状态",prop:"status",width:"auto"},{label:"业主",prop:"userResidentName",width:"auto"},{label:"手机号",prop:"userResidentTel",width:"auto"},{label:"房屋类型",prop:"type",width:"auto"},{label:"建筑面积",prop:"constructionArea",width:"auto"},{label:"室内面积",prop:"indoorArea",width:"auto"}],url:"houseList",data:{pageNum:1,size:10}}}},methods:{revises:function(e){e.length?e.length>1?this.$message.error("只能单条数据修改"):(this.$refs.addEidt.edit(e[0].id),this.drawerTitle="修改房屋"):this.$message.error("请选中需要修改的数据")},add:function(){this.drawerTitle="新增房屋",this.drawer_vrisible=!0},handleClose:function(){this.drawer_vrisible=!1},tableCheck:function(e){console.log(e),this.table_row=e},getData:function(){this.$refs.table.loadData()},del:function(e){var t=this;if(e.length){for(var r=[],o=0;o<this.table_row.length;o++)r.push(this.table_row[o].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){t.$refs.table.tableDelete(r)})).catch((function(e){}))}else this.$message.error("请选中需要删除的数据")}}},m=f,b=Object(c["a"])(m,o,l,!1,null,"c2a62c60",null);t["default"]=b.exports},8418:function(e,t,r){"use strict";var o=r("c04e"),l=r("9bf2"),n=r("5c6c");e.exports=function(e,t,r){var i=o(t);i in e?l.f(e,i,n(0,r)):e[i]=r}},a434:function(e,t,r){"use strict";var o=r("23e7"),l=r("23cb"),n=r("a691"),i=r("50c4"),a=r("7b0b"),s=r("65f0"),u=r("8418"),c=r("1dde"),d=r("ae40"),p=c("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var r,o,c,d,p,f,w=a(this),g=i(w.length),y=l(e,g),_=arguments.length;if(0===_?r=o=0:1===_?(r=0,o=g-y):(r=_-2,o=b(m(n(t),0),g-y)),g+r-o>h)throw TypeError(v);for(c=s(w,o),d=0;d<o;d++)p=y+d,p in w&&u(c,d,w[p]);if(c.length=o,r<o){for(d=y;d<g-o;d++)p=d+o,f=d+r,p in w?w[f]=w[p]:delete w[f];for(d=g;d>g-o+r;d--)delete w[d-1]}else if(r>o)for(d=g-o;d>y;d--)p=d+o-1,f=d+r-1,p in w?w[f]=w[p]:delete w[f];for(d=0;d<r;d++)w[d+y]=arguments[d+2];return w.length=g-o+r,c}})},b0c0:function(e,t,r){var o=r("83ab"),l=r("9bf2").f,n=Function.prototype,i=n.toString,a=/^\s*function ([^ (]*)/,s="name";o&&!(s in n)&&l(n,s,{configurable:!0,get:function(){try{return i.call(this).match(a)[1]}catch(e){return""}}})},c975:function(e,t,r){"use strict";var o=r("23e7"),l=r("4d64").indexOf,n=r("a640"),i=r("ae40"),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,u=n("indexOf"),c=i("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:s||!u||!c},{indexOf:function(e){return s?a.apply(this,arguments)||0:l(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-3f153d64.398160a6.js.map