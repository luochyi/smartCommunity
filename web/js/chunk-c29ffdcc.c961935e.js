(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c29ffdcc"],{4773:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-content"},[t._m(0),s("div",{staticClass:"content_box"},[s("div",{staticClass:"left"},[s("div",{staticClass:"left_title"},[t._m(1),s("div",{staticClass:"left_icon"},[s("span",{on:{click:t.addCost}},[s("i",{staticClass:"el-icon-plus"})]),s("span",{on:{click:t.deleteCost}},[s("i",{staticClass:"el-icon-delete"})])])]),s("ul",t._l(t.costList,(function(e,i){return s("li",{key:e.id,class:t.costActive===i?"active":"",on:{click:function(s){return t.tableChange(i,e.id,e.name)}}},[e.editBool?s("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{flex:"1"},attrs:{size:"small"},on:{blur:function(s){return t.editInputBlur(s,e.name,e.id,i)},focus:function(s){return t.editInputFocus(s,e.name)}},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"item.name"}}):s("span",[t._v(t._s(e.name))]),s("span",[s("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.editType(i)}}})])],1)})),0)]),s("div",{staticClass:"right"},[s("div",{staticClass:"right_title"},[s("span",{staticStyle:{"padding-right":"18px"}},[t._v("是否启用")]),s("el-switch",{staticClass:"switchStyle",attrs:{value:t.IsEnable,"active-text":"开","inactive-text":"关","active-color":"rgba(251, 71, 2, 1)"},on:{change:t.switchChange}})],1),s("div",{staticClass:"right_input"},[s("div",{staticClass:"content-btn"},[s("el-input",{staticStyle:{width:"240px","padding-right":"24px"},attrs:{placeholder:"请输入收费项目",size:"small","prefix-icon":"el-icon-search"},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}}),s("el-button",{staticClass:"init-button",on:{click:function(e){return t.add()}}},[t._v("添加费用")]),s("el-button",{staticClass:"init-button",on:{click:function(e){return t.edit(t.table_row)}}},[t._v("编辑费用")]),s("el-button",{staticClass:"init-button",on:{click:function(e){return t.del(t.table_row)}}},[t._v("删除费用")]),s("div",{staticStyle:{"margin-left":"16px",display:"inline-block"}},[s("download-excel",{staticClass:"export-excel-wrapper",attrs:{fetch:t.fetchData,fields:t.json_fields,"before-finish":t.finishDownload,name:"日常缴费.xls"}},[s("el-button",{staticClass:"init-button",attrs:{size:"small"}},[t._v("导出Excel")])],1)],1)],1)]),s("div",{staticClass:"right_table"},[s("tableData",{attrs:{config:t.config},on:{clickrow:t.tableCheck}})],1)]),s("Drawer",{attrs:{drawerTitle:t.costTitle,drawerVrisible:t.cost_vrisible},on:{drawerClose:t.costClose}},[s("div",{staticStyle:{padding:"30px"}},[s("FromCard",[s("template",{slot:"title"},[t._v("基本信息")]),[s("VueForm",{ref:"costVueForm",attrs:{formObj:t.costForm},on:{ruleSuccess:t.costRuleSubmit}})]],2)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn-orange",on:{click:function(e){return t.costSubmit()}}},[s("span",[s("i",{staticClass:"el-icon-circle-check"}),t._v("提交")])]),s("button",{staticClass:"btn-gray",on:{click:t.costClose}},[s("span",[t._v("取消")])])])])],1)])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-titel"},[s("span",[t._v("收费标准管理")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("费用版本名称")])])}],n=(s("99af"),s("d81d"),s("b0c0"),s("96cf"),s("1da1")),c=s("1615"),a=s("662b"),l={data:function(){return{cost_vrisible:!1,costTitle:"新增费用项目",costList:[],typeListName:"",costActive:0,costForm:{ruleForm:{typeName:null,name:null,unitPrice:null,type:null,marker:null,otherFee:null},form_item:[{type:"Input",label:"费用版本",placeholder:"请输入",disabled:!0,width:"100%",prop:"typeName"},{type:"Select",label:"费用类型",placeholder:"请输入",options:[{label:"物业管理费",value:1},{label:"维修费",value:2},{label:"装修押金",value:3},{label:"活动报名费",value:4},{label:"日常费用",value:5}],width:"100%",prop:"marker"},{type:"Input",label:"费用项目名称",placeholder:"请输入",width:"100%",prop:"name"},{type:"Input",label:"单价",placeholder:"请输入",width:"100%",prop:"unitPrice"},{type:"Select",label:"单位",placeholder:"请选择单位",prop:"type",width:"100%",options:[{label:"元/月 平方米",value:1},{label:"元/ 立方米",value:2},{label:"元/ 次",value:3}]},{type:"Input",label:"附加费用",placeholder:"请输入",prop:"otherFee",width:"100%"}],rules:{typeName:[{required:!0}],marker:[{required:!0,message:"请输入费用项目名称",trigger:"blur"}],name:[{required:!0,message:"请选择费用类型",trigger:"change"}],unitPrice:[{required:!0,message:"请输入单价",trigger:"blur"}],type:[{required:!0,message:"请选择单位",trigger:"change"}]}},IsEnable:!1,input2:"",config:{thead:[{label:"序号",type:"index",width:"80"},{label:"费用名称",prop:"name",width:"auto"},{label:"计费单价/单位",prop:"unitPrice",width:"auto"},{label:"附加/固定费用",prop:"otherFee",width:"auto"},{label:"创建人",prop:"createName",width:"auto"},{label:"更新日期",prop:"modifyDate",width:"auto"}],table_data:[],loading:!0},json_fields:{"费用名称":"name","计费单价/单位":"unitPrice","附加/固定费用":"otherFee","创建人":"createName","更新日期":"modifyDate"},table_row:[]}},directives:{focus:{inserted:function(t){t.querySelector("input").focus()}}},mounted:function(){this.getCostType()},methods:{fetchData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return[],s={url:"chargesTemplateDetailList",data:{pageNum:1,size:100,chargesTemplateId:t.costList[t.costActive].id}},e.next=4,Object(a["a"])(s,t);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))()},ExcelLoading:function(t,e){var s=this.$loading({lock:!0,text:"正在导出Excel".concat(t),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s.text="正在导出Excel  ".concat(t,"/").concat(e),console.log(s.text)},finishDownload:function(){var t=this.$loading();t.close()},switchChange:function(t){var e=this;this.$confirm("是否确认修改该版本禁启用","禁启用提示",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){Object(c["h"])({id:e.costList[e.costActive].id}).then((function(t){console.log(t),t.status&&(e.$message({type:"success",message:t.message}),e.IsEnable=!e.IsEnable,e.getCostType())}))})).catch((function(t){}))},getCostType:function(){var t=this;Object(c["i"])().then((function(e){console.log(e),t.costList=e,t.costList.map((function(e){t.$set(e,"editBool",!1)})),t.costList[t.costActive].status?t.IsEnable=!0:t.IsEnable=!1,t.GetTableData(t.costList[t.costActive].id)}))},editType:function(t){this.$set(this.costList[t],"editBool",!0)},editInputFocus:function(t,e){this.typeListName=e},editInputBlur:function(t,e,s,i){if(this.$set(this.costList[i],"editBool",!1),this.typeListName!==e){if(""===e)return this.costList[i].name=this.typeListName,void this.$message.error("内容不能为空");var o={id:s,name:e};Object(c["j"])(o).then((function(t){console.log(t)}))}},tableChange:function(t,e,s){this.costActive=t,this.getCostType()},GetTableData:function(t){var e=this,s={pageNum:1,size:10,chargesTemplateId:t};Object(c["e"])(s).then((function(t){e.config.table_data=t.tableList,e.config.loading=!1}))},deleteCost:function(){var t=this;this.$confirm("是否确认删除费用版本？删除不可恢复","费用版本删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){var e={ids:[t.costList[t.costActive].id]};console.log(e),Object(c["a"])(e).then((function(e){e.status&&(t.$message({type:"success",message:e.message}),t.costActive=0,t.getCostType())}))})).catch((function(t){}))},addCost:function(){var t=this;this.$prompt("请输入费用版本名称","添加费用版本",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var s=e.value;if(s){var i={name:s};Object(c["g"])(i).then((function(e){e.status&&(t.$message({type:"success",message:e.message}),t.getCostType())}))}})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},add:function(){this.cost_vrisible=!0,this.costForm.ruleForm.typeName=this.costList[this.costActive].name,console.log(this.costForm.ruleForm)},edit:function(t){var e=this;if(t.length){if(t.length>1)return void this.$message.error("不能批量编辑");var s={id:t[0].id};Object(c["c"])(s).then((function(t){console.log(t),e.costForm.ruleForm.typeName=e.costList[e.costActive].name,e.costEditId=t.byId.id,e.costForm.ruleForm.marker=t.byId.marker,e.costForm.ruleForm.name=t.byId.name,e.costForm.ruleForm.otherFee=t.byId.otherFee,e.costForm.ruleForm.type=t.byId.type,e.costForm.ruleForm.unitPrice=t.byId.unitPrice,e.cost_vrisible=!0}))}else this.$message.error("请选择需要编辑的数据")},costRuleSubmit:function(){var t=this,e={chargesTemplateId:this.costList[this.costActive].id,name:this.costForm.ruleForm.name,unitPrice:parseInt(this.costForm.ruleForm.unitPrice),marker:1,type:parseInt(this.costForm.ruleForm.type),otherFee:parseInt(this.costForm.ruleForm.otherFee),additionalCostList:[{cost:1,name:"电器费用"}]};this.costEditId?(e.id=this.costEditId,Object(c["f"])(e).then((function(e){e.status&&t.$message({type:"success",message:e.message}),t.costClose(),t.GetTableData(t.costList[t.costActive].id)}))):Object(c["d"])(e).then((function(e){t.$message({type:"success",message:e.message}),t.costClose(),t.GetTableData(t.costList[t.costActive].id)}))},costSubmit:function(){this.$refs.costVueForm.submitForm()},costClose:function(){this.cost_vrisible=!1,this.$refs.costVueForm.reset(),this.costForm.ruleForm.typeName=null,this.costEditId=null,this.costForm.ruleForm.marker=null,this.costForm.ruleForm.name=null,this.costForm.ruleForm.otherFee=null,this.costForm.ruleForm.type=null,this.costForm.ruleForm.unitPrice=null},del:function(t){var e=this;if(t.length){for(var s=[],i=0;i<this.table_row.length;i++)s.push(this.table_row[i].id);this.$confirm("是否确认删除？删除不可恢复","删除",{confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonClass:"confirmButton",cancelButtonClass:"cancelButton"}).then((function(){var t={ids:s};Object(c["b"])(t).then((function(t){t.status&&(e.$message({type:"success",message:t.message}),e.GetTableData(e.costList[e.costActive].id))}))})).catch((function(t){}))}else this.$message.error("请选中需要删除的数据")},tableCheck:function(t){this.table_row=t}}},r=l,u=(s("ea11"),s("2877")),m=Object(u["a"])(r,i,o,!1,null,"ce70720e",null);e["default"]=m.exports},b680:function(t,e,s){},ea11:function(t,e,s){"use strict";var i=s("b680"),o=s.n(i);o.a}}]);
//# sourceMappingURL=chunk-c29ffdcc.c961935e.js.map