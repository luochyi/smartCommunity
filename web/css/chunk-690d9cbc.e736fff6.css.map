{"version":3,"sources":["webpack:///src/views/butler/page/src/views/butler/page/subjectManagement.vue"],"names":[],"mappings":"AACA,uBACA,WAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,iBAAA,CACA,UAAA,CACA,wBACA","file":"chunk-690d9cbc.e736fff6.css","sourcesContent":["<style scoped>\n.tips {\n    margin: 20px;\n    height: 38px;\n    line-height: 38px;\n    background: #fafafa;\n    border-radius: 4px;\n    opacity: 0.8;\n    border: 1px solid #e8e8e8;\n}\n</style>\n<template>\n  <div class=\"main-content\">\n    <div class=\"main-titel\">\n      <span>主题明细管理</span>\n    </div>\n    <div class=\"content\">\n      <div class=\"\">\n        <VueTable ref=\"table\"\n                  :config='config'\n                  @tableCheck=\"tableCheck\">\n          <template slot=\"footer\">\n            <div class=\"table-footer\">\n              <button @click=\"recovery(table_row)\">恢复</button>\n              <button @click=\"del(table_row)\">删除</button>\n            </div>\n          </template>\n        </VueTable>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nimport { gambitThemeRecovery } from '@/api/butler'\nexport default {\n  data () {\n    return {\n      config: {\n        thead: [\n          { label: '序号', type: 'index', width: '80' },\n          { label: '话题标题', prop: 'title', width: '380' },\n          { label: '话题摘要', prop: 'summary', width: '180' },\n          { label: '发布人昵称', prop: 'gambitNickName', width: '180' },\n          { label: '发布人姓名', prop: 'gambitName', width: '180' },\n          { label: '发布内容', prop: 'gambitContent', width: '380' },\n          { label: '是否公开', prop: 'isPublic', width: '110' },\n          { label: '是否可评论', prop: 'isRating', width: '110' },\n          { label: '发布时间', prop: 'gambitCreateDate', width: '180', sortable: true },\n          { label: '评论人昵称', prop: 'themeNickName', width: '180' },\n          { label: '评论人姓名', prop: 'themeName', width: '110' },\n          { label: '评论时间', prop: 'themeCreateDate', width: '180', sortable: true },\n          { label: '评论内容', prop: 'themeContent', width: '280' },\n          { label: '点赞人数', prop: 'likeNum', width: '180', sortable: true },\n          { label: '评论人数', prop: 'commentNum', width: '180', sortable: true },\n          { label: '状态', prop: 'isDelete', width: 'auto' }\n        ],\n        url: 'gambitThemeList',\n        table_data: [],\n        search_item: [\n          {\n            type: 'startDate',\n            label: '发布开始时间',\n            placeholder: '请选择开始日期',\n            prop: 'beginDate'\n          },\n          {\n            type: 'startDate',\n            label: '发布结束时间',\n            placeholder: '请选择结束日期',\n            prop: 'endDate'\n          },\n          {\n            type: 'Input',\n            label: '话题标题',\n            placeholder: '请输入',\n            prop: 'title'\n          },\n\n          {\n            type: 'Input',\n            label: '发布人姓名',\n            placeholder: '请输入',\n            prop: 'gambitName'\n          },\n          {\n            type: 'Input',\n            label: '发布人昵称',\n            placeholder: '请输入',\n            prop: 'nickName'\n          }, {\n            type: 'select',\n            label: '状态',\n            value: null,\n            options: [\n              { value: 0, label: '删除' },\n              { value: 1, label: '正常' }\n            ],\n            placeholder: '请输入',\n            prop: 'isDelete'\n          },\n          {\n            type: 'Input',\n            label: '话题摘要',\n            placeholder: '请输入',\n            prop: 'summary',\n            width: '50%',\n            inputWidth: '658px'\n          },\n          {\n            type: 'Input',\n            label: '发布内容',\n            placeholder: '请输入',\n            prop: 'gambitContent',\n            width: '50%',\n            inputWidth: '658px'\n          },\n          {\n            type: 'Input',\n            label: '评论内容',\n            placeholder: '请输入',\n            width: '50%',\n            prop: 'content',\n            inputWidth: '658px'\n          }\n        ],\n        data: {\n          pageNum: 1,\n          size: 10\n        },\n      },\n    }\n  },\n  methods: {\n    tableCheck (arr) {\n      this.table_row = arr\n\n    },\n    // 恢复\n    recovery (data) {\n      if (data.length) {\n        let arr = []\n        for (let i = 0; i < this.table_row.length; i++) {\n          arr.push(this.table_row[i].id)\n        }\n        let resData = {\n          ids: arr\n        }\n        this.$confirm('是否批量恢复主题明细？', '恢复', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          confirmButtonClass: 'confirmButton',\n          cancelButtonClass: 'cancelButton'\n        }).then(() => {\n          gambitThemeRecovery(resData).then((res) => {\n            if (res.status) {\n              this.$message({\n                message: res.message,\n                type: 'success'\n              })\n              this.$refs.table.loadData()\n            }\n          })\n        }).catch(action => { });\n      } else {\n        this.$message.error('请选中需要删除的数据');\n      }\n    },\n    // 删除\n    del (data) {\n      if (data.length) {\n        let arr = []\n        for (let i = 0; i < this.table_row.length; i++) {\n          arr.push(this.table_row[i].id)\n        }\n        this.$confirm('是否确认删除？删除不可恢复', '删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          confirmButtonClass: 'confirmButton',\n          cancelButtonClass: 'cancelButton'\n        }).then(() => {\n          this.$refs.table.tableDelete(arr)\n        }).catch(action => { });\n      } else {\n        this.$message.error('请选中需要删除的数据');\n      }\n    },\n\n  },\n}\n</script>\n"]}