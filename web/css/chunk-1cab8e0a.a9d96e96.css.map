{"version":3,"sources":["webpack:///src/views/butler/page/src/views/butler/page/itemManagemsent.vue"],"names":[],"mappings":"AA2UA,4BACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,eAAA,CACA,0BAAA,CACA,iBAAA,CACA,qBAAA,CACA,gCAAA,CACA,iBACA","file":"chunk-1cab8e0a.a9d96e96.css","sourcesContent":["<template>\n  <div class=\"main-content\">\n    <div class=\"main-titel\">\n      <span>物品管理</span>\n    </div>\n    <div class=\"content\">\n      <div class=\"content-btn\">\n        <el-button class=\"init-button\"\n                   icon=\"el-icon-plus\"\n                   @click=\"addGoods\">添加物品</el-button>\n      </div>\n      <div class=\"\">\n\n        <VueTable ref=\"table\"\n                  :config='config'\n                  @tableCheck=\"tableCheck\">\n          <!-- <template slot=\"tabs\">\n            <el-tabs v-model=\"activeName\"\n                     @tab-click=\"handleClick\">\n              <el-tab-pane label=\"全部\"\n                           name=\"0\"></el-tab-pane>\n              <el-tab-pane label=\"正常\"\n                           name=\"1\"></el-tab-pane>\n              <el-tab-pane label=\"破损\"\n                           name=\"2\"></el-tab-pane>\n            </el-tabs>\n          </template> -->\n          <template v-slot:imgUrls=\"slotData\">\n            <div v-if=\"slotData.data.imgUrls.length\">\n              <el-button class=\"init-text\"\n                         type=\"text\"\n                         @click=\"getPhotoView(slotData.data.imgUrls)\">\n                <span>查看</span>\n              </el-button>\n            </div>\n            <div v-else>\n              -\n            </div>\n          </template>\n          <template slot=\"footer\">\n            <div class=\"table-footer\">\n              <button @click='editGoods(table_row)'>编辑</button>\n              <button @click=\"del(table_row)\">删除</button>\n              <!-- <button>打印二维码</button> -->\n            </div>\n          </template>\n        </VueTable>\n      </div>\n\n      <Drawer :drawerTitle=\"addEidtTitle\"\n              @drawerClose=\"addEidtClose\"\n              :drawerVrisible='addEidt_vrisible'>\n        <div style=\"padding:30px\">\n          <FromCard>\n            <template slot=\"title\">基本信息</template>\n            <template>\n              <VueForm ref=\"addEidtFrom\"\n                       @ruleSuccess='addEidtSuccess'\n                       :formObj='addEidtForm'>\n                <template slot='fileUrls'>\n                  <template>\n                    <el-upload :action=\"`${$baseUrl}upload/uploadRepair`\"\n                               :on-success=\"voteImgeSuccess\"\n                               :show-file-list=\"false\"\n                               :before-upload=\"beforeAvatarUpload\">\n                      <div class='sys-image'\n                           style='width:104px; height:104px'>\n                        <div v-if=\"!fileUrls\">\n                          <i class=\"el-icon-plus\"></i>\n                          <p>上传照片</p>\n                        </div>\n                        <!-- editBool -->\n                        <div v-else>\n                          <el-image v-if=\"!editBool\"\n                                    :src=\"`${$ImgUrl}/temp${fileUrls}`\"\n                                    style=\"width: 104px; height: 104px\"></el-image>\n                          <el-image v-else\n                                    :src=\"`${$ImgUrl}${fileUrls}`\"\n                                    style=\"width: 104px; height: 104px\"></el-image>\n                        </div>\n\n                      </div>\n                    </el-upload>\n                  </template>\n\n                </template>\n                <template slot='quantity'>\n                  <el-input-number v-model=\"addEidtForm.ruleForm.quantity\"\n                                   controls-position=\"right\"\n                                   :min=\"1\"\n                                   :max=\"99\"></el-input-number>\n                </template>\n\n              </VueForm>\n            </template>\n          </FromCard>\n        </div>\n        <div slot=\"footer\">\n          <button class=\"btn-orange\"\n                  @click=\"addEidtSubmit()\"><span> <i class=\"el-icon-circle-check\"></i>提交</span></button>\n          <button class=\"btn-gray\"\n                  @click=\"addEidtClose\"><span>取消</span></button>\n        </div>\n      </Drawer>\n    </div>\n    <views-photo :isVisible=\"photos_Visible\"\n                 :goodsImgsList=\"goodsImgsList\"\n                 @closeViews=\"getclose\"></views-photo>\n  </div>\n</template>\n<script>\nimport viewsPhoto from '@/components/dialog/viewsPhoto'\nimport { articleFindById } from '@/api/butler'\nexport default {\n    data() {\n        return {\n            // 选中表格数据\n            table_row: [],\n            editBool: false, //是否为编辑\n            fileUrls: '',\n            config: {\n                thead: [\n                    { label: '序号', type: 'index', width: '80' },\n                    { label: '物品名称', prop: 'name', width: 'auto' },\n                    {\n                        label: '照片',\n                        prop: 'imgUrls',\n                        width: 'auto',\n                        type: 'slot',\n                        slotName: 'imgUrls'\n                    },\n                    /**\n           *\n           *  prop: 'goodsImgUrls',\n            width: '180',\n            type: 'slot',\n            slotName: 'goodsImgUrls',\n           * */\n                    { label: '数量', prop: 'quantity', width: 'auto' },\n                    { label: '库存', prop: 'stock', width: 'auto' }\n                    // { label: '物品状态', prop: 'status', width: 'auto' },\n                ],\n                table_data: [],\n                url: 'articleList',\n                search_item: [\n                    {\n                        type: 'Input',\n                        label: '物品名称',\n                        placeholder: '请输入',\n                        prop: 'name'\n                    }\n                ],\n                data: {\n                    pageNum: 1,\n                    size: 10\n                }\n            },\n            addEidt_vrisible: false,\n            addEidtForm: {\n                ruleForm: {\n                    name: null,\n                    fileUrls: null,\n                    quantity: null,\n                    articleDetailList: null\n                },\n                form_item: [\n                    {\n                        type: 'Input',\n                        label: '物品名称',\n                        placeholder: '请输入',\n                        width: '100%',\n                        prop: 'name'\n                    },\n                    {\n                        type: 'Slot',\n                        label: '照片',\n                        width: '100%',\n                        prop: 'fileUrls',\n                        slotName: 'fileUrls'\n                    },\n                    {\n                        type: 'Slot',\n                        label: '数量',\n                        placeholder: '请输入',\n                        width: '100%',\n                        prop: 'quantity',\n                        slotName: 'quantity'\n                    }\n                ],\n                rules: {\n                    name: [\n                        {\n                            required: true,\n                            message: '请输入物品名称',\n                            trigger: 'blur'\n                        }\n                    ],\n                    fileUrls: [\n                        {\n                            required: true,\n                            message: '请上传图片',\n                            trigger: 'change'\n                        }\n                    ],\n                    quantity: [\n                        {\n                            required: true,\n                            message: '请输入数量',\n                            trigger: 'change'\n                        }\n                    ]\n                }\n            },\n            addEidtTitle: '',\n            goodsImgsList: [],\n            photos_Visible: false\n        }\n    },\n    components: {\n        viewsPhoto\n    },\n    methods: {\n        // 添加物品\n        addGoods() {\n            this.addEidtTitle = '添加物品'\n            this.addEidt_vrisible = true\n        },\n        // 编辑\n        editGoods(data) {\n            if (data.length > 1) {\n                this.$message.error('只能查看一条数据的详情')\n                return\n            }\n            if (!data.length) {\n                this.$message.error('请选择')\n                return\n            }\n\n            articleFindById({ id: data[0].id }).then((result) => {\n                console.log(result)\n                // this.editBool = true\n                // this.editId = result.id\n                // this.reportRepairFrom.ruleForm.type = result.type + ''\n                // this.reportRepairFrom.ruleForm.fileUrls = result.imgUrls[0].url\n                // this.fileUrls = result.imgUrls[0].url\n                // this.reportRepairFrom.ruleForm.reportDetail = result.reportDetail\n                // this.reportRepairFrom.ruleForm.repairman = result.repairman\n                // this.reportRepairFrom.ruleForm.tel = result.tel\n                // this.reportRepairFrom.ruleForm.repairDate = result.repairDate\n            })\n        },\n        // vueForm 验证通过提交服务器\n        addEidtSuccess() {},\n        // vueForm 验证提交\n        addEidtSubmit() {\n            this.$refs.addEidtFrom.submitForm()\n        },\n        addEidtClose() {\n            this.addEidt_vrisible = false\n            this.fileUrls = ''\n            this.$refs.addEidtFrom.reset()\n            this.addEidtForm.ruleForm.fileUrls = []\n        },\n        // 查看图片\n        getPhotoView(item) {\n            this.photos_Visible = true\n            this.goodsImgsList = item\n        },\n        // 关闭查看图片\n        getclose() {\n            this.photos_Visible = false\n        },\n        tableCheck(data) {\n            this.table_row = data\n        },\n        onSubmit() {},\n        // 删除\n        del(data) {\n            let arr = []\n            for (let i = 0; i < this.table_row.length; i++) {\n                arr.push(this.table_row[i].id)\n            }\n            this.$confirm('暂无', '删除', {\n                confirmButtonText: '确定',\n                // showCancelButton: false\n                cancelButtonText: '取消'\n                // confirmButtonClass: 'confirmButton',\n                // cancelButtonClass: 'cancelButton'\n            })\n                .then(() => {})\n                .catch((action) => {})\n        },\n        // 上传照片\n        beforeAvatarUpload(file) {\n            const isLt2M = file.size / 1024 / 1024 < 2\n            const isJPG = file.type === 'image/png'\n            const isPNG = file.type === 'image/jpeg'\n            if (!isJPG && !isPNG) {\n                this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\n            }\n            if (!isLt2M) {\n                this.$message.error('上传头像图片大小不能超过 2MB!')\n            }\n            return (isJPG || isPNG) && isLt2M\n        },\n        // 图片上传成功\n        voteImgeSuccess(res, file) {\n            this.fileUrls = res.url\n            this.editBool = false\n            // this.$set(this.reportRepairFrom.ruleForm.fileUrls)\n            this.addEidtForm.ruleForm.fileUrls[0] = res.url\n        }\n        // 状态切换\n        // handleClick (tab, event) {\n        //   let status = null\n        //   if (this.activeName != 0) {\n        //     status = this.activeName\n        //   } else {\n        //     status = null\n        //   }\n        //   const requestData = {\n        //     pageNum: 1,\n        //     size: 10,\n        //     status: status\n        //   }\n        //   this.$refs.table.requestData(requestData);\n        // },\n    }\n}\n</script>\n<style scoped>\n.sys-image {\n    width: 80px;\n    height: 80px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    background: rgba(0, 0, 0, 0.04);\n    border-radius: 2px;\n    box-sizing: border-box;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    margin-right: 12px;\n}\n</style>\n"]}