{"version":3,"sources":["webpack:///src/views/butler/page/src/views/butler/page/itemsOut.vue"],"names":[],"mappings":"AACA,uBACA,WAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,iBAAA,CACA,UAAA,CACA,wBACA","file":"chunk-78e35ee2.cc4852c0.css","sourcesContent":["<style scoped>\n.tips {\n    margin: 20px;\n    height: 38px;\n    line-height: 38px;\n    background: #fafafa;\n    border-radius: 4px;\n    opacity: 0.8;\n    border: 1px solid #e8e8e8;\n}\n</style>\n<template>\n  <div class=\"main-content\">\n    <div class=\"main-titel\">\n      <span>物品出门</span>\n    </div>\n    <div class=\"tips\">\n      <p>\n        <span class=\"el-icon-warning-outline\"\n              style=\"margin:0 12px\"></span>\n        温馨提示：今日预计有\n        <span style=\"color:rgba(251, 71, 2, 1)\">{{countNow}}</span>\n        户家庭发起装修，共计{{countPerformed}}户家庭未执行\n      </p>\n    </div>\n    <div class=\"content\">\n      <!-- 查询重制 -->\n      <div class=\"\">\n        <VueTable ref=\"table\"\n                  :config='config'\n                  @tableCheck=\"tableCheck\">\n          <template slot=\"tabs\">\n            <el-tabs v-model=\"activeName\"\n                     @tab-click=\"handleClick\">\n              <el-tab-pane label=\"全部\"\n                           name=\"0\"></el-tab-pane>\n              <el-tab-pane label=\"待出门\"\n                           name=\"1\"></el-tab-pane>\n              <el-tab-pane label=\"已出门\"\n                           name=\"2\"></el-tab-pane>\n              <el-tab-pane label=\"驳回申请\"\n                           name=\"3\"></el-tab-pane>\n            </el-tabs>\n          </template>\n          <template v-slot:goodsImgUrls=\"slotData\">\n            <div v-if=\"slotData.data.goodsImgUrls.length\">\n              <el-button class=\"init-text\"\n                         type=\"text\"\n                         @click=\"getPhotoView(slotData.data.goodsImgUrls)\">\n                <span>查看</span>\n              </el-button>\n            </div>\n            <div v-else>\n              -\n            </div>\n          </template>\n          <template slot=\"footer\">\n            <div class=\"table-footer\">\n              <!-- <button>编辑</button> -->\n              <button @click=\"del(table_row)\">删除</button>\n              <!-- <button>详情</button>\n              <button>驳回申请</button> -->\n            </div>\n          </template>\n        </VueTable>\n      </div>\n    </div>\n    <views-photo :isVisible=\"photos_Visible\"\n                 :goodsImgsList=\"goodsImgsList\"\n                 @closeViews=\"getclose\"></views-photo>\n  </div>\n</template>\n<script>\nimport viewsPhoto from '@/components/dialog/viewsPhoto'\nimport {\n    userArticleOutCountArticleOutNow,\n    userArticleOutCountPerformed,\n    userArticleOuFindGoOutImgById,\n    userArticleOutFindGoodsImgById\n} from '@/api/butler'\nexport default {\n    data() {\n        return {\n            photos_Visible: false,\n            goodsImgsList: [],\n            // 选中表格数据\n            table_row: [],\n            config: {\n                thead: [\n                    { label: '序号', type: 'index', width: '80' },\n                    {\n                        label: '房屋信息',\n                        prop: 'roomName',\n                        width: '180'\n                    },\n                    // {\n                    //     label: '房屋状态',\n                    //     prop: 'estateStatus',\n                    //     width: '180',\n                    //     type: 'function',\n                    //     callback: (row, prop) => {\n                    //         switch (row.estateStatus) {\n                    //             case 1:\n                    //                 return '待出门'\n                    //                 break\n                    //             case 2:\n                    //                 return '已出门'\n                    //                 break\n                    //             case 3:\n                    //                 return '驳回申请'\n                    //                 break\n                    //             default:\n                    //                 break\n                    //         }\n                    //     }\n                    // },\n                    { label: '业主', prop: 'residentName', width: '180' },\n                    { label: '联系方式', prop: 'residentTel', width: '180' },\n                    { label: '物品名称', prop: 'name', width: '180' },\n                    {\n                        label: '物品照片',\n                        prop: 'goodsImgUrls',\n                        width: '180',\n                        type: 'slot',\n                        slotName: 'goodsImgUrls'\n                    },\n                    { label: '申请人', prop: 'applicantName', width: '180' },\n                    { label: '联系方式', prop: 'applicantTel', width: '180' },\n                    { label: '搬运方式', prop: 'approach', width: '180' },\n                    {\n                        label: '预计出门时间',\n                        prop: 'expectedTime',\n                        width: '180'\n                    },\n                    {\n                        label: '实际出门时间',\n                        prop: 'actualTime',\n                        width: '180'\n                    },\n                    {\n                        label: '出户出门',\n                        prop: 'export',\n                        width: '180',\n                        type: 'function',\n                        callback: (row, prop) => {\n                            switch (row.export) {\n                                case 1:\n                                    return '东门'\n                                    break\n                                case 2:\n                                    return '南门'\n                                    break\n                                case 3:\n                                    return '西门'\n                                    break\n                                case 4:\n                                    return '北门'\n                                    break\n                                default:\n                                    break\n                            }\n                        }\n                    },\n                    // {\n                    //   label: '出门照片',\n                    //   prop: 'table14',\n                    //   width: '180',\n                    //   type: 'imagebtn',\n                    // },\n                    {\n                        label: '状态',\n                        prop: 'status',\n                        width: '180',\n                        type: 'function',\n\n                        callback: (row, prop) => {\n                            switch (row.status) {\n                                case 1:\n                                    return '待出门'\n                                    break\n                                case 2:\n                                    return '已出门'\n                                    break\n                                case 3:\n                                    return '驳回申请'\n                                    break\n                                default:\n                                    break\n                            }\n                        }\n                    },\n                    { label: '备注', prop: 'remarks', width: '180' }\n                ],\n                url: 'itemsOutList',\n                table_data: [],\n                search_item: [\n                    {\n                        type: 'Input',\n                        label: '房屋信息',\n                        placeholder: '单元/楼栋/房号',\n                        prop: 'roomName'\n                    },\n                    {\n                        type: 'select',\n                        label: '出户出口',\n                        placeholder: '请选择',\n                        prop: 'export',\n                        options: [\n                            {\n                                value: '1',\n                                label: '东门'\n                            },\n                            {\n                                value: '2',\n                                label: '南门'\n                            },\n                            {\n                                value: '3',\n                                label: '西门'\n                            },\n                            {\n                                value: '4',\n                                label: '北门'\n                            }\n                        ]\n                    },\n                    {\n                        type: 'Input',\n                        label: '申请人',\n                        placeholder: '请输入',\n                        prop: 'applicantName'\n                    },\n                    {\n                        type: 'Input',\n                        label: '联系方式',\n                        placeholder: '请输入',\n                        prop: 'applicantTel'\n                    },\n                    {\n                        type: 'startDate',\n                        label: '实际出门时间',\n                        placeholder: '请选择开始日期',\n                        prop: 'actualTimeStart'\n                    },\n                    {\n                        type: 'endDate',\n                        label: '实际结束时间',\n                        placeholder: '请选择结束时间',\n                        prop: 'actualTimeEnd'\n                    }\n                ],\n                data: {\n                    pageNum: 1,\n                    size: 10\n                }\n            },\n            // tab默认绑定\n            activeName: 0,\n            // 今日发起装修数量\n            countNow: null,\n            // 未发起装修数量\n            countPerformed: null\n        }\n    },\n    components: {\n        viewsPhoto\n    },\n    mounted() {\n        this.getTipsData()\n    },\n    methods: {\n        getPhotoView(item) {\n            this.photos_Visible = true\n            // let resData = {\n            //   id: id,\n            // }\n            // userArticleOutFindGoodsImgById(resData).then(result => {\n            //   console.log(result)\n            this.goodsImgsList = item\n            // })\n        },\n        getclose() {\n            this.photos_Visible = false\n        },\n        handleClick(tab, event) {\n            let status = null\n            if (this.activeName != 0) {\n                status = this.activeName\n            } else {\n                status = null\n            }\n            const requestData = {\n                pageNum: 1,\n                size: 10,\n                status: status\n            }\n            this.$refs.table.requestData(requestData)\n        },\n        tableCheck(arr) {\n            this.table_row = arr\n        },\n        // 发起装修数量\n        getTipsData() {\n            // 今日发起装修\n            userArticleOutCountArticleOutNow().then((result) => {\n                this.countNow = result.countNow\n            })\n            // 共计未装修\n            userArticleOutCountPerformed().then((result) => {\n                this.countPerformed = result.countPerformed\n            })\n        },\n        // 删除\n        del(data) {\n            if (data.length) {\n                let arr = []\n                for (let i = 0; i < this.table_row.length; i++) {\n                    arr.push(this.table_row[i].id)\n                }\n                this.$confirm('是否确认删除？删除不可恢复', '删除', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    confirmButtonClass: 'confirmButton',\n                    cancelButtonClass: 'cancelButton'\n                })\n                    .then(() => {\n                        this.$refs.table.tableDelete(arr)\n                    })\n                    .catch((action) => {})\n            } else {\n                this.$message.error('请选中需要删除的数据')\n            }\n        }\n    }\n}\n</script>\n"]}