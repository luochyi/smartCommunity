{"version":3,"sources":["webpack:///src/views/butler/components/suggestConsultation/src/views/butler/components/suggestConsultation/details.vue","webpack:///src/views/commodity/page/src/views/commodity/page/groupManagement.vue"],"names":[],"mappings":"AAqMA,iCACA,oBAAA,CACA,gBAAA,CACA,4BACA,CACA,4BACA,YACA,CACA,gCACA,YAAA,CACA,wBAAA,CACA,SACA,CACA,6CACA,aAAA,CACA,YAAA,CACA,kBAAA,CACA,MACA,CCtNA,uBACA,WAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,iBAAA,CACA,UAAA,CACA,wBACA","file":"chunk-329401e2.45406f99.css","sourcesContent":["<template>\n  <div>\n    <el-drawer title=\"咨询建议\"\n               :visible.sync=\"isVisibleDrawe\"\n               size=\"58%\"\n               :before-close=\"close\">\n      <div class=\"drawer-box\"\n           v-if=\"isVisibleDrawe\">\n\n        <div class=\"dra-body\">\n          <div class=\"dra-content\">\n            <div class=\"content-titel\">\n              <span>基本信息</span>\n            </div>\n            <div class=\"\">\n              <el-form label-position=\"right\"\n                       label-width=\"100px\"\n                       size=\"small\">\n                <el-form-item label=\"类型\"\n                              style=\"width:100%\">\n                  <span v-if=\"detailData.type ===1 \">咨询</span>\n                  <span v-if=\"detailData.type ===2 \">建议</span>\n                </el-form-item>\n                <el-form-item label=\"照片\"\n                              v-if=\"detailData.imgUrl!==null\"\n                              style=\"width:100%\">\n                  <el-image style=\"width: 140px; height: 100px\"\n                            :src=\"`${$ImgUrl}${detailData.imgUrl[0].url}`\"\n                            fit=\"scale-down\"></el-image>\n                </el-form-item>\n                <el-form-item label=\"反馈内容\"\n                              v-if=\"detailData.voUserAdviceDetailList.length!==0\"\n                              style=\"width:100%\">\n                  <template>\n                    <div class=\"table_box\"\n                         v-for=\"(item,index) in detailData.voUserAdviceDetailList\"\n                         :key='index'>\n                      <div>\n                        <p>{{item.createName}}</p>\n                        <p>{{item.createDate}}</p>\n                      </div>\n                      <div class=\"content_item\">\n                        <p>{{item.content}}</p>\n                      </div>\n                    </div>\n                  </template>\n\n                </el-form-item>\n                <el-form-item label=\"星级评分\"\n                              v-if=\"rateNum\"\n                              style=\"width:100%\">\n                  <el-rate v-model=\"rateNum\"\n                           :colors=\"colors\"\n                           disabled></el-rate>\n                </el-form-item>\n              </el-form>\n            </div>\n          </div>\n          <div class=\"dra-content\">\n            <div class=\"content-titel\">\n              <span>回复反馈</span>\n            </div>\n            <div class=\"\">\n              <el-form label-position=\"right\"\n                       label-width=\"100px\"\n                       size=\"small\">\n                <el-form-item label=\"反馈\"\n                              style=\"width:100%\">\n                  <el-input type=\"textarea\"\n                            :autosize=\"{ minRows: 6}\"\n                            placeholder=\"请输入内容\"\n                            v-model=\"content\">\n                  </el-input>\n\n                </el-form-item>\n              </el-form>\n            </div>\n          </div>\n        </div>\n        <div class=\"dra-footer\">\n          <div class=\"dra-footer-content\">\n            <button class=\"dra-submit el-icon-circle-check\"\n                    @click=\"submit\"><span>提交</span></button>\n            <button class=\"dra-cancel\"\n                    @click=\"close\"><span>关闭</span></button>\n          </div>\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n<script>\nimport { adviceFindById, adviceInsertDetail } from '@/api/butler'\nexport default {\n  props: {\n    drawerVrisible: {\n      type: Boolean,\n      default: false,\n    },\n    suggestId: {\n      type: Number,\n      default: () => 0,\n    }\n  },\n  mounted () {\n\n  },\n  data () {\n    return {\n      detailData: {\n        id: 1,\n        type: 1,\n        score: 6,\n        imgUrl: [{ url: '' }],\n        voUserAdviceDetailList: [],\n      },\n      isVisibleDrawe: false,\n\n      content: '',\n      colors: ['#FB4702', '#FB4702', '#FB4702'],\n      rate: 5,\n    }\n  },\n  computed: {\n    rateNum () {\n      let rate = 0\n      if (this.detailData.score) {\n        rate = this.detailData.score / 2\n      }\n      return rate\n    }\n  },\n  methods: {\n    close () {\n      this.content = null\n      this.$emit('handleClose', \"Close\")\n    },\n    submit () {\n      let pId = 0\n      if (this.detailData.voUserAdviceDetailList.length > 0) {\n        pId = this.detailData.voUserAdviceDetailList[0].id\n      }\n      let resData = {\n        adviceId: this.detailData.id,\n        content: this.content,\n        parentId: pId,\n        createUserType: 3,\n      }\n      console.log(resData)\n      adviceInsertDetail(resData).then(result => {\n        console.log(result)\n        if (result.status) {\n          this.$message({\n            message: result.message,\n            type: 'success'\n          })\n          this.close()\n        } else {\n          this.$message({\n            message: result.message,\n            type: 'error'\n          })\n        }\n      })\n    },\n    getDetails (id) {\n      if (id) {\n        let resData = {\n          id: id\n        }\n        adviceFindById(resData).then(res => {\n          console.log(res)\n          this.detailData = res.voFindByIdAdvice\n          this.detailData.voUserAdviceDetailList = res.voFindByIdAdvice.voUserAdviceDetailList ? res.voFindByIdAdvice.voUserAdviceDetailList : []\n        })\n      }\n    }\n  },\n  // 返回详情弹窗\n  watch: {\n    drawerVrisible: {\n      handler (newValue) {\n        this.isVisibleDrawe = newValue\n        console.log(newValue)\n      },\n      immediate: true\n    },\n    suggestId: {\n      handler (newValue) {\n        this.getDetails(newValue)\n      },\n      immediate: true\n    },\n  }\n}\n</script>\n<style scoped>\n.content-titel2 {\n    margin: 0px 0px 20px 30px;\n    padding-top: 30px;\n    border-top: 1px solid #e8e8e8;\n}\n.table_box {\n    display: flex;\n}\n.table_box > div {\n    padding: 14px;\n    border: 1px solid #f5f5f6;\n    width: 25%;\n}\n.table_box > div.content_item {\n    border-left: 0;\n    display: flex;\n    align-items: center;\n    flex: 1;\n}\n</style>\n","<style scoped>\n.tips {\n  margin: 20px;\n  height: 38px;\n  line-height: 38px;\n  background: #fafafa;\n  border-radius: 4px;\n  opacity: 0.8;\n  border: 1px solid #e8e8e8;\n}\n</style>\n<template>\n  <div class=\"main-content\">\n    <div class=\"main-titel\">\n      <span>拼团管理</span>\n    </div>\n    <div class=\"content\">\n      <!-- 查询重制 -->\n      <div class=\"\">\n        <!-- 头部输入框 -->\n        <el-tabs v-model=\"activeName\"\n                 @tab-click=\"handleClick\">\n          <el-tab-pane label=\"全部拼团\"\n                       name=\"first\"></el-tab-pane>\n          <el-tab-pane label=\"拼团中\"\n                       name=\"second\"></el-tab-pane>\n          <el-tab-pane label=\"拼团成功\"\n                       name=\"third\"></el-tab-pane>\n          <el-tab-pane label=\"拼团失败\"\n                       name=\"fourth\"></el-tab-pane>\n        </el-tabs>\n        <div class=\"content-table\">\n          <tableData :config=\"table_config\"\n                     @clickrow=\"tableRow\"></tableData>\n          <div class=\"table-footer\">\n            <button @click=\"drawer_details = true\">查询</button>\n            <button @click=\"del\">删除</button>\n          </div>\n        </div>\n        <table-pagination></table-pagination>\n      </div>\n    </div>\n    <!-- 详情 -->\n    <drawerDetails :drawerVrisible=\"drawer_details\"\n                   @handleClose=\"getClose\"></drawerDetails>\n    <!-- 删除 提示弹窗-->\n    <Dialog :dialogVisible=\"dialog_visible\"\n            :dialog_config=\"dialog_config\"\n            @cancel=\"cancel\"\n            @confirm=\"confirm\">\n    </Dialog>\n  </div>\n</template>\n\n<script>\nimport drawerDetails from '@/views/butler/components/suggestConsultation/details.vue'\nimport Dialog from '@/components/dialog/Dialog.vue'\n\nexport default {\n  data () {\n    return {\n      // 控制dialog显示隐藏\n      dialog_visible: false,\n      // 传入dialog的参数\n      dialog_config: {\n        title: '',\n        content: ''\n      },\n      activeName: 'first',\n      // drawerDetails\n      drawer_details: false,\n      table_config: {\n        thead: [\n          { label: '拼团ID', prop: 'table1', width: '120' },\n          { label: '商品ID', prop: 'table2', width: '120' },\n          { label: '商品名称', prop: 'table3', width: '580' },\n          { label: '状态 ', prop: 'table4', width: '180' },\n          { label: '已买/总需', prop: 'table5', width: '120' },\n          { label: '开团时间', prop: 'table6', width: '180' },\n          { label: '到期时间', prop: 'table7', width: '180' }\n        ],\n        table_data: [\n          {\n            table1: '20200001',\n            table2: '3187873204',\n            table3:\n              '俏美味综合蔬菜干果蔬脆水果干混合装果蔬脆片秋葵香菇脆儿童零食',\n            table4: '拼团成功-已发货 ',\n            table5: '100/100',\n            table6: '2020-08-20 09:00',\n            table7: '2020-10-19 09:00'\n          },\n          {\n            table1: '20200002',\n            table2: '3187872204',\n            table3:\n              '【超定制】三只松鼠 零食坚果大礼包1490g中秋节礼盒送礼9袋装',\n            table4: '拼团中 ',\n            table5: '100/100',\n            table6: '2020-08-20 09:00',\n            table7: '2020-10-19 09:00'\n          },\n          {\n            table1: '20200003',\n            table2: '5207915650',\n            table3:\n              '【超定制】三只松鼠 零食坚果大礼包1490g中秋节礼盒送礼9袋装',\n            table4: '拼团失败-已退款',\n            table5: '100/100',\n            table6: '2020-08-20 09:00',\n            table7: '2020-10-19 09:00'\n          },\n          {\n            table1: '20200004',\n            table2: '3123873204',\n            table3:\n              '俏美味综合蔬菜干果蔬脆水果干混合装果蔬脆片秋葵香菇脆儿童零食',\n            table4: '拼团成功-已发货 ',\n            table5: '100/100',\n            table6: '2020-08-20 09:00',\n            table7: '2020-10-19 09:00'\n          },\n          {\n            table1: '20200005',\n            table2: '5202315650',\n            table3:\n              '【超定制】三只松鼠 零食坚果大礼包1490g中秋节礼盒送礼9袋装',\n            table4: '拼团成功-已发货 ',\n            table5: '100/100',\n            table6: '2020-08-20 09:00',\n            table7: '2020-10-19 09:00'\n          }\n        ]\n      }\n    }\n  },\n  components: {\n    drawerDetails,\n    Dialog\n  },\n  methods: {\n    handleClick (row) {\n      console.log(row)\n    },\n    // table选中行\n    tableRow (data) {\n      this.table_row = data\n    },\n    // 监听子组件取消事件\n    cancel (data) {\n      this.dialog_visible = false\n    },\n    // 监听子组件确认事件\n    confirm (data) {\n      this.dialog_visible = false\n      this.$message({\n        message: '删除成功',\n        type: 'success'\n      })\n    },\n    // 删除\n    del (data) {\n      console.log(this.table_row.table6 + '0000')\n      if (JSON.stringify(data) != '{}') {\n        this.dialog_config.title = '删除提示'\n        if (this.table_row.table6 != '已反馈') {\n          this.dialog_config.content = '该条信息，还为回复是否确认删除？'\n        } else {\n          this.dialog_config.content = '是否确认删除该信息？'\n        }\n        this.dialog_visible = true\n      } else {\n        this.$message.error('请选中需要删除的表格数据')\n      }\n    },\n    // 关闭抽屉\n    getClose (data) {\n      this.drawer_details = false\n    }\n  }\n}\n</script>\n"]}